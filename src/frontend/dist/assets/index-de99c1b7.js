var Os=Object.defineProperty;var Us=(t,s,a)=>s in t?Os(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a;var At=(t,s,a)=>(Us(t,typeof s!="symbol"?s+"":s,a),a);import{r as n,j as e,Y as Vs,Z as Hs,_ as Je,$ as zt,a0 as $t,a1 as Ws,a2 as Mt,a3 as Rt,a4 as Ft,a5 as Bt,a6 as Ot,a7 as Ut,a8 as Vt,a9 as Gs,aa as Ys,ab as qs,ac as Js,ad as Ks,ae as gt,af as ue,ag as Ht,ah as Wt,ai as Gt,aj as Xs,ak as Zs,al as Qs,am as ea,an as ta,ao as Yt,ap as sa,aq as qt,ar as Jt,as as aa,at as Kt,au as ra,av as Xt,aw as Zt,ax as ia,ay as na,az as Qt,aA as oa,aB as la,aC as es,aD as ts,aE as ss,aF as as,aG as rs,aH as is,aI as ca,aJ as da,aK as ma,aL as ns,aM as ua,aN as It,aO as le,aP as $e,aQ as xa}from"./vendor-b23c7a0c.js";import{m as l,A as Lt}from"./framer-motion-303c03dd.js";import{C as ha,a as os,b as ga,P as pa,S as fa,M as ba,c as ja,d as Xe,L as ya,e as va,U as Na,f as wa,I as ls,g as cs,A as ka,B as ds,h as Sa,F as he,i as Me,j as nt,k as ms,l as Ca,T as ot,R as Ta,m as Ea,n as Aa,o as Ia,Y as La,N as Da,X as pt,p as de,q as ft,Z as Ae,V as us,r as xs,E as _e,s as Pa,t as _a,u as Ie,v as za,w as lt,x as bt,y as Be,z as Ze,D as hs,G as $a,H as pe,J as Ma,K as Ra,O as Fa,Q as Le,W as gs,_ as ps,$ as jt,a0 as Ba,a1 as Oa,a2 as ke,a3 as fs,a4 as Ua,a5 as Dt,a6 as Re,a7 as yt,a8 as Va,a9 as ct,aa as Ha,ab as Wa,ac as Ga,ad as Ya,ae as bs,af as qa,ag as Ja,ah as tt,ai as Ka,aj as vt,ak as dt,al as st,am as Xa,an as Za}from"./lucide-react-288a0c5d.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const m of r.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&o(m)}).observe(document,{childList:!0,subtree:!0});function a(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(i){if(i.ep)return;i.ep=!0;const r=a(i);fetch(i.href,r)}})();const Qa={theme:"system",setTheme:()=>null},js=n.createContext(Qa);function ys({children:t,defaultTheme:s="system",storageKey:a="vite-ui-theme",...o}){const[i,r]=n.useState(()=>localStorage.getItem(a)||s);n.useEffect(()=>{const u=window.document.documentElement;u.classList.remove("light","dark");let c=i;i==="system"&&(c=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),console.log(`ThemeProvider: Applying class '${c}' to root element. Current theme state: '${i}'`),u.classList.add(c),console.log("ThemeProvider: Root element classList after update:",u.classList.toString())},[i]);const m={theme:i,setTheme:u=>{localStorage.setItem(a,u),r(u)}};return e.jsx(js.Provider,{...o,value:m,children:t})}const er=()=>{const t=n.useContext(js);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t};function E(...t){return Vs(Hs(t))}const z=({children:t,variant:s="primary",size:a="md",loading:o=!1,success:i=!1,error:r=!1,ripple:m=!0,className:u,onClick:c,disabled:x,...y})=>{const[d,f]=Je.useState([]),p={primary:"bg-primary text-primary-foreground hover:bg-primary/90",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"bg-transparent hover:bg-accent hover:text-accent-foreground",gradient:"bg-gradient-to-r from-primary to-secondary text-white hover:shadow-lg",glow:"bg-primary text-primary-foreground shadow-[0_0_20px_rgba(99,102,241,0.5)] hover:shadow-[0_0_30px_rgba(99,102,241,0.7)]",outline:"border border-primary bg-transparent text-primary hover:bg-primary/10"},v={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"},k=b=>{if(m&&!x&&!o){const L=b.currentTarget.getBoundingClientRect(),j=b.clientX-L.left,A=b.clientY-L.top,Z=Date.now();f(H=>[...H,{x:j,y:A,id:Z}]),setTimeout(()=>{f(H=>H.filter(ne=>ne.id!==Z))},600)}c==null||c(b)},S=()=>o?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(l.div,{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}}),e.jsx("span",{children:"Loading..."})]}):i?e.jsxs(l.div,{initial:{scale:0},animate:{scale:1},className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),e.jsx("span",{children:"Success!"})]}):r?e.jsxs(l.div,{initial:{scale:0},animate:{scale:1},className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),e.jsx("span",{children:"Error!"})]}):t;return e.jsxs(l.button,{className:E("relative overflow-hidden rounded-lg font-medium","transition-all duration-200","disabled:opacity-50 disabled:cursor-not-allowed","focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2",p[s],v[a],i&&"bg-green-500 hover:bg-green-600",r&&"bg-red-500 hover:bg-red-600",u),whileHover:!x&&!o?{scale:1.05}:{},whileTap:!x&&!o?{scale:.95}:{},onClick:k,disabled:x||o,...y,children:[d.map(b=>e.jsx(l.span,{className:"absolute rounded-full bg-white/30",style:{left:b.x,top:b.y,transform:"translate(-50%, -50%)"},initial:{width:0,height:0,opacity:1},animate:{width:200,height:200,opacity:0},transition:{duration:.6,ease:"easeOut"}},b.id)),s==="gradient"&&e.jsx(l.div,{className:"absolute inset-0 bg-white/20",initial:{x:"-100%"},whileHover:{x:"100%"},transition:{duration:.6}}),e.jsx("span",{className:"relative z-10",children:S()})]})},tr=Gs,sr=Ys,ar=n.forwardRef(({className:t,inset:s,children:a,...o},i)=>e.jsxs(zt,{ref:i,className:E("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",s&&"pl-8",t),...o,children:[a,e.jsx(ha,{className:"ml-auto"})]}));ar.displayName=zt.displayName;const rr=n.forwardRef(({className:t,...s},a)=>e.jsx($t,{ref:a,className:E("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...s}));rr.displayName=$t.displayName;const vs=n.forwardRef(({className:t,sideOffset:s=4,...a},o)=>e.jsx(Ws,{children:e.jsx(Mt,{ref:o,sideOffset:s,className:E("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...a})}));vs.displayName=Mt.displayName;const Ge=n.forwardRef(({className:t,inset:s,...a},o)=>e.jsx(Rt,{ref:o,className:E("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",s&&"pl-8",t),...a}));Ge.displayName=Rt.displayName;const ir=n.forwardRef(({className:t,children:s,checked:a,...o},i)=>e.jsxs(Ft,{ref:i,className:E("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:a,...o,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Bt,{children:e.jsx(os,{className:"h-4 w-4"})})}),s]}));ir.displayName=Ft.displayName;const nr=n.forwardRef(({className:t,children:s,...a},o)=>e.jsxs(Ot,{ref:o,className:E("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...a,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Bt,{children:e.jsx(ga,{className:"h-2 w-2 fill-current"})})}),s]}));nr.displayName=Ot.displayName;const or=n.forwardRef(({className:t,inset:s,...a},o)=>e.jsx(Ut,{ref:o,className:E("px-2 py-1.5 text-sm font-semibold",s&&"pl-8",t),...a}));or.displayName=Ut.displayName;const mt=n.forwardRef(({className:t,...s},a)=>e.jsx(Vt,{ref:a,className:E("-mx-1 my-1 h-px bg-muted",t),...s}));mt.displayName=Vt.displayName;const B=qs()(Js((t,s)=>({isAuthenticated:!1,user:null,token:null,login:a=>{console.log("[AuthStore] Login action called. Payload:",a),a.token||console.warn("[AuthStore] Login attempt: userData.token is falsy. UserData:",a),t({isAuthenticated:!0,user:a.user,token:a.token})},register:a=>{console.log("[AuthStore] Register action called. Payload:",a),a.token||console.warn("[AuthStore] Register attempt: userData.token is falsy. UserData:",a),t({isAuthenticated:!0,user:a.user,token:a.token})},logout:()=>{console.log("[AuthStore] Logout action called."),t({isAuthenticated:!1,user:null,token:null})},_resetAuthIfInconsistent:()=>{console.warn("[AuthStore] State was inconsistent after hydration (authenticated but no token). Resetting auth state."),t({isAuthenticated:!1,user:null,token:null})}}),{name:"auth-storage",storage:Ks(()=>localStorage),onRehydrateStorage:()=>(t,s)=>{s?console.error("[AuthStore] An error occurred during hydration:",s):t?(console.log("[AuthStore] Hydration merging complete. Current store state:",t),t.isAuthenticated&&!t.token&&(B.setState({isAuthenticated:!1,user:null,token:null}),console.warn("[AuthStore] State was inconsistent after hydration (authenticated but no token). Auth state has been reset directly."))):console.warn("[AuthStore] Hydration complete, but hydratedStoreState was undefined.")},partialize:t=>({isAuthenticated:t.isAuthenticated,user:t.user,token:t.token})})),lr=({isSidebarOpen:t,toggleSidebar:s})=>{const{theme:a,setTheme:o}=er(),{isAuthenticated:i,user:r,logout:m}=B(),u=gt(),c=()=>{console.log("Theme toggle clicked! Current theme:",a);const y=["light","dark","system"],f=(y.indexOf(a)+1)%y.length,p=y[f];console.log("Switching to theme:",p),o(p)},x=()=>{m(),u("/login")};return e.jsx("header",{className:"bg-transparent border-b border-white/10 shadow-lg backdrop-blur-md py-3 pr-8 sticky top-0 z-50 min-h-[64px] overflow-visible",children:e.jsxs("div",{className:"w-full pl-6 flex items-center justify-between h-full max-w-none",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[i&&e.jsxs(z,{variant:"ghost",size:"md",onClick:s,className:"border-white/20 hover:bg-white/10",children:[e.jsx(pa,{className:"h-5 w-5"}),e.jsx("span",{className:"sr-only",children:"Toggle sidebar"})]}),e.jsx(ue,{to:i?"/dashboard":"/",className:"text-xl font-semibold bg-gradient-to-r from-pink-400 to-purple-400 bg-clip-text text-transparent hover:opacity-80 transition-opacity",children:"Synapse"})]}),e.jsxs("div",{className:"flex items-center gap-3 header-buttons",children:[e.jsxs(z,{variant:"ghost",size:"md",className:"border-white/20 hover:bg-white/10 flex items-center justify-center w-12 h-12 p-0",onClick:c,title:`Current theme: ${a}. Click to cycle through themes.`,children:[e.jsxs("div",{className:"relative w-6 h-6 flex items-center justify-center",children:[e.jsx(fa,{className:"h-5 w-5 absolute inset-0 rotate-0 scale-100 transition-all duration-300 dark:-rotate-90 dark:scale-0"}),e.jsx(ba,{className:"h-5 w-5 absolute inset-0 rotate-90 scale-0 transition-all duration-300 dark:rotate-0 dark:scale-100"})]}),e.jsx("span",{className:"sr-only",children:"Toggle theme"})]}),i?e.jsxs(tr,{children:[e.jsx(sr,{className:"relative w-10 h-10 p-0 rounded-full hover:bg-white/10 flex items-center justify-center bg-transparent border border-white/20 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2",children:e.jsx(ja,{className:"h-6 w-6 text-purple-300"})}),e.jsxs(vs,{className:"w-56 z-[60] bg-black/80 backdrop-blur-md border border-white/10 p-2 mt-2",align:"end",forceMount:!0,children:[e.jsx(Ge,{className:"font-normal focus:bg-white/5",children:e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx("p",{className:"text-sm font-medium leading-none text-white",children:(r==null?void 0:r.fullName)||(r==null?void 0:r.email)||"User"}),(r==null?void 0:r.email)&&e.jsx("p",{className:"text-xs leading-none text-gray-400",children:r.email})]})}),e.jsx(mt,{className:"bg-white/10"}),e.jsxs(Ge,{onClick:()=>u("/settings"),className:"hover:bg-white/5 cursor-pointer",children:[e.jsx(Xe,{className:"mr-2 h-4 w-4 text-gray-300"}),e.jsx("span",{className:"text-gray-200",children:"Settings"})]}),e.jsx(mt,{className:"bg-white/10"}),e.jsxs(Ge,{onClick:x,className:"hover:bg-red-500/10 focus:bg-red-500/20 cursor-pointer",children:[e.jsx(ya,{className:"mr-2 h-4 w-4 text-red-400"}),e.jsx("span",{className:"text-red-300",children:"Log out"})]})]})]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{variant:"ghost",className:"border-purple-500/50 text-purple-300 hover:bg-purple-500/20 hover:border-purple-500 glow-effect-purple-sm",children:e.jsxs(ue,{to:"/login",children:[e.jsx(va,{className:"mr-2 h-4 w-4"})," Login"]})}),e.jsx(z,{variant:"gradient",className:"from-pink-500 to-purple-600 glow-effect-md",children:e.jsxs(ue,{to:"/register",children:[e.jsx(Na,{className:"mr-2 h-4 w-4"})," Register"]})})]})]})]})})},cr=({isSidebarOpen:t})=>{const s=[{href:"/dashboard",label:"Dashboard",icon:wa},{href:"/inbox",label:"Inbox",icon:ls},{href:"/images",label:"Images",icon:cs},{href:"/capture",label:"Capture",icon:ka},{href:"/projects",label:"Projects",icon:ds},{href:"/tasks",label:"Tasks",icon:Sa},{href:"/notes",label:"Notes",icon:he},{href:"/ideas",label:"Ideas",icon:Me},{href:"/meetings",label:"Meetings",icon:nt},{href:"/calendar",label:"Calendar",icon:ms},{href:"/planning",label:"Planning",icon:Ca},{href:"/goals",label:"Goals",icon:ot},{href:"/habits",label:"Habits",icon:Ta},{href:"/automations",label:"Automations",icon:Ea},{href:"/whatsapp",label:"WhatsApp",icon:Aa},{href:"/bookmarks",label:"Bookmarks",icon:Ia},{href:"/videos",label:"Videos",icon:La},{href:"/news",label:"News",icon:Da},{href:"/settings",label:"Settings",icon:Xe}],a=Ht(),o={initial:{opacity:0,x:-20},animate:{opacity:1,x:0},hover:{scale:1.05,backgroundColor:"rgba(255, 255, 255, 0.1)"},tap:{scale:.98}};return e.jsxs("aside",{className:`
        flex flex-col z-40
        bg-gray-900 backdrop-blur-sm border-r border-white/10 p-4
        
        /* DESKTOP (â‰¥ md) ----------------------------------- */
        md:block md:sticky md:top-0 
        ${t?"md:w-64":"md:w-20"}
        md:h-screen

        /* MOBILE (< md) ------------------------------------ */
        fixed top-0 left-0 md:relative h-dvh 
        transition-all duration-300 ease-in-out 
        ${t?"translate-x-0 shadow-2xl":"-translate-x-full"}
        w-64
        
        /* Mobile optimizations for better clarity */
        md:bg-gray-900/95 md:backdrop-blur-md
        supports-[backdrop-filter]:md:bg-gray-900/90
        supports-[backdrop-filter]:md:backdrop-blur-lg
      `,"aria-label":"Primary",children:[e.jsx("div",{className:"mb-6 flex items-center justify-center pt-2",children:e.jsxs(ue,{to:"/dashboard",className:"flex items-center gap-2",children:[e.jsxs(l.svg,{width:t?"32":"24",height:t?"32":"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"text-purple-400 transition-all duration-300",animate:{rotate:t?0:360},transition:{duration:.5},children:[e.jsx("path",{d:"M12 2L2 7L12 12L22 7L12 2Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M2 17L12 22L22 17",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M2 12L12 17L22 12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),e.jsx("h2",{className:`text-xl md:text-2xl font-bold bg-gradient-to-r from-pink-400 to-purple-400 bg-clip-text text-transparent overflow-hidden whitespace-nowrap transition-all duration-300 ${t?"opacity-100 w-auto ml-2":"opacity-0 w-0 ml-0"}`,children:"Synapse"})]})}),e.jsx("nav",{className:"flex-grow overflow-y-auto scrollbar-thin scrollbar-thumb-white/20 scrollbar-track-transparent pr-1",children:e.jsx("ul",{className:"flex flex-col gap-1 md:gap-2",children:s.map((i,r)=>{const m=i.icon,u=a.pathname.startsWith(i.href);return e.jsx(l.li,{variants:o,initial:"initial",animate:"animate",whileHover:"hover",whileTap:"tap",transition:{delay:r*.05,type:"spring",stiffness:300,damping:20},children:e.jsxs(ue,{to:i.href,className:`
                    flex items-center p-2 md:p-3 rounded-lg group transition-all duration-200 ease-in-out
                    ${t?"justify-start":"justify-center"}
                    ${u?"bg-gradient-to-r from-pink-500/30 to-purple-500/30 text-white shadow-md border border-white/20":"text-gray-300 hover:text-white hover:bg-white/10"}
                  `,children:[e.jsx(m,{className:`
                    h-5 w-5 md:h-5 md:w-5 transition-colors duration-200 flex-shrink-0
                    ${u?"text-white":"text-gray-400 group-hover:text-purple-300"}
                    ${t?"mr-3":"mx-auto"}
                  `}),e.jsx("span",{className:`text-sm font-medium overflow-hidden whitespace-nowrap transition-all duration-300 ${t?"opacity-100 max-w-full":"opacity-0 max-w-0"}`,children:i.label})]})},i.label)})})}),t&&e.jsx(l.div,{className:"mt-auto pt-4 border-t border-white/10",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:s.length*.05+.2},children:e.jsx("p",{className:"text-xs text-center text-gray-500",children:"Synapse v0.1.0"})})]})},dr=({children:t})=>{const[s,a]=n.useState(!1),o=Ht(),[i,r]=n.useState(typeof window<"u"&&window.innerWidth<768);n.useEffect(()=>{const x=()=>{const y=window.innerWidth<768;y!==i&&r(y)};return window.addEventListener("resize",x),()=>window.removeEventListener("resize",x)},[i]),n.useEffect(()=>{i&&a(!1)},[o.pathname,i]);const m=()=>{a(!s)},u={initial:{opacity:0,y:20,scale:.98},in:{opacity:1,y:0,scale:1},out:{opacity:0,y:-20,scale:1.02}},c={type:"tween",ease:"anticipate",duration:.4};return e.jsxs("div",{className:"min-h-screen flex flex-col bg-gradient-to-br from-background via-background to-muted/10",children:[e.jsx("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:e.jsx(l.div,{className:"absolute top-0 left-0 w-full h-full opacity-5",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E")`},animate:{opacity:[.02,.05,.02]},transition:{duration:8,repeat:1/0,ease:"easeInOut"}})}),e.jsx(lr,{isSidebarOpen:s,toggleSidebar:m}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx(Lt,{children:i&&s&&e.jsx(l.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"fixed inset-0 z-40 bg-black/20 backdrop-blur-sm md:hidden",onClick:m,"aria-label":"Close menu"})}),e.jsx(cr,{isSidebarOpen:s}),e.jsx("main",{className:"flex flex-grow flex-col relative",children:e.jsx(Lt,{mode:"wait",initial:!1,children:e.jsx(l.div,{initial:"initial",animate:"in",exit:"out",variants:u,transition:c,className:"flex-1 overflow-y-auto",style:{scrollbarWidth:"thin"},children:e.jsx("div",{className:"relative z-10",children:t})},o.pathname)})})]})]})},De={}.VITE_BACKEND_ROOT_URL||(typeof window<"u"?window.location.origin:"http://localhost:3001"),mr="/api/v1",Y=Wt.create({baseURL:`${De}${mr}`}),ut=De;Y.interceptors.request.use(t=>{const s=B.getState().token;return console.log("[AxiosInterceptor] Token from store:",s?"Present":"Absent"),s?(t.headers.set("Authorization",`Bearer ${s}`),console.log("[AxiosInterceptor] Authorization header SET")):console.log("[AxiosInterceptor] No token found in store, Authorization header NOT SET"),console.log("[AxiosInterceptor] Making request to:",t.url),t},t=>(console.error("[AxiosInterceptor] Request error:",t),Promise.reject(t)));Y.interceptors.response.use(t=>(console.log("[AxiosInterceptor] Response from:",t.config.url,"Status:",t.status),t),t=>{var s,a,o,i,r;return console.error("[AxiosInterceptor] Response error from:",(s=t.config)==null?void 0:s.url,"Status:",(a=t.response)==null?void 0:a.status,"Data:",(o=t.response)==null?void 0:o.data),t.response&&t.response.status===401&&t.config&&!((i=t.config.url)!=null&&i.includes("/auth/login"))&&!((r=t.config.url)!=null&&r.includes("/auth/register"))&&B.getState().logout(),Promise.reject(t)});const ur=async(t=1,s=10)=>{try{return(await Y.get("/bookmarks",{params:{page:t,limit:s}})).data}catch(a){throw console.error("Error fetching bookmarks:",a),a}},xr=async t=>{try{return(await Y.delete(`/bookmarks/${t}`)).data}catch(s){throw console.error(`Error deleting bookmark ${t}:`,s),s}},hr=async t=>{try{return(await Y.post(`/bookmarks/${t}/summarize`)).data.bookmark}catch(s){throw console.error(`Error summarizing bookmark ${t}:`,s),s&&s.isAxiosError&&s.response?s.response.data:s}},gr=async()=>{try{return(await Y.post("/bookmarks/summarize-latest")).data}catch(t){throw console.error("Error calling summarize latest bookmarks service:",t),t&&t.isAxiosError&&t.response?t.response.data:t}},pr=async(t,s,a)=>{const o=`https://api.elevenlabs.io/v1/text-to-speech/${s}`;try{return(await Wt.post(o,{text:t,model_id:"eleven_multilingual_v2"},{headers:{"Content-Type":"application/json","xi-api-key":a},responseType:"blob"})).data}catch(i){if(console.error("Error calling ElevenLabs Text-to-Speech API:",i),i.response){if(i.response.data instanceof Blob)try{const m=await i.response.data.text();throw console.error("Error data as text (Blob):",m),new Error(`ElevenLabs API Error: Status ${i.response.status} - ${m}`)}catch(m){throw console.error("Could not parse Blob error response:",m),new Error(`ElevenLabs API Error: Status ${i.response.status} - Could not parse Blob error response.`)}let r=`Status ${i.response.status}`;if(i.response.data&&typeof i.response.data=="object"){const m=i.response.data.detail;if(m&&typeof m.message=="string")r=`${r} - ${m.message}`;else if(typeof i.response.data.message=="string")r=`${r} - ${i.response.data.message}`;else try{r=`${r} - ${JSON.stringify(i.response.data)}`}catch{r=`${r} - (Unparseable error data object)`}}else typeof i.response.data=="string"&&(r=`${r} - ${i.response.data}`);throw new Error(`ElevenLabs API Error: ${r}`)}else throw i.request?(console.error("Error request (no response received):",i.request),new Error("ElevenLabs API Error: No response received from server.")):(console.error("Error message (request setup issue):",i.message),new Error(`ElevenLabs API Error: ${i.message}`))}},fr=1,br=1e6;let at=0;function jr(){return at=(at+1)%Number.MAX_SAFE_INTEGER,at.toString()}const rt=new Map,Pt=t=>{if(rt.has(t))return;const s=setTimeout(()=>{rt.delete(t),Fe({type:"REMOVE_TOAST",toastId:t})},br);rt.set(t,s)},yr=(t,s)=>{switch(s.type){case"ADD_TOAST":return{...t,toasts:[s.toast,...t.toasts].slice(0,fr)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(a=>a.id===s.toast.id?{...a,...s.toast}:a)};case"DISMISS_TOAST":{const{toastId:a}=s;return a?Pt(a):t.toasts.forEach(o=>{Pt(o.id)}),{...t,toasts:t.toasts.map(o=>o.id===a||a===void 0?{...o,open:!1}:o)}}case"REMOVE_TOAST":return s.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(a=>a.id!==s.toastId)}}},Ye=[];let qe={toasts:[]};function Fe(t){qe=yr(qe,t),Ye.forEach(s=>{s(qe)})}function vr({...t}){const s=jr(),a=i=>Fe({type:"UPDATE_TOAST",toast:{...i,id:s}}),o=()=>Fe({type:"DISMISS_TOAST",toastId:s});return Fe({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:i=>{i||o()}}}),{id:s,dismiss:o,update:a}}function Qe(){const[t,s]=n.useState(qe);return n.useEffect(()=>(Ye.push(s),()=>{const a=Ye.indexOf(s);a>-1&&Ye.splice(a,1)}),[t]),{...t,toast:vr,dismiss:a=>Fe({type:"DISMISS_TOAST",toastId:a})}}const Ns=n.createContext(void 0),Nr=({children:t})=>{const[s,a]=n.useState(()=>{const d=localStorage.getItem("latestDigest");return d?JSON.parse(d):null}),[o,i]=n.useState(()=>{const d=localStorage.getItem("latestDigestSources");return d?JSON.parse(d):null}),[r,m]=n.useState(!1),{toast:u}=Qe();n.useEffect(()=>{const d=localStorage.getItem("latestDigest");d&&a(JSON.parse(d));const f=localStorage.getItem("latestDigestSources");f&&i(JSON.parse(f))},[]);const c=d=>{console.log("[DigestProvider] setLatestDigest CALLED with:",d),a(d),d?localStorage.setItem("latestDigest",JSON.stringify(d)):localStorage.removeItem("latestDigest")},x=d=>{console.log("[DigestProvider] setLatestDigestSources CALLED with:",d),i(d),d?localStorage.setItem("latestDigestSources",JSON.stringify(d)):localStorage.removeItem("latestDigestSources")},y=async(d,f)=>{console.log("[DigestProvider] summarizeLatestBookmarks action called"),m(!0),c(null),x(null),localStorage.removeItem("latestDigest"),localStorage.removeItem("latestDigestSources");try{const p=await gr();u({title:"Digest Generation Complete",description:p.message}),p.comprehensiveSummary?c(p.comprehensiveSummary):c("No comprehensive summary was returned by the backend for the digest."),p.summarizedBookmarks&&p.summarizedBookmarks.length>0&&f(v=>v.map(k=>{const S=p.summarizedBookmarks.find(b=>b._id===k._id);return S||k})),p.errors&&p.errors.length>0&&p.errors.forEach(v=>{u({title:`Error Processing Bookmark ID: ${v.bookmarkId} for digest`,description:v.error,variant:"destructive"}),f(k=>k.map(S=>S._id===v.bookmarkId?{...S,status:"error",summary:S.summary||`Error while creating digest: ${v.error}`}:S))}),p.digestSourceInfo&&x(p.digestSourceInfo)}catch(p){console.error("Error in summarizeLatestBookmarks action (DigestContext):",p),u({title:"Error Generating Digest",description:(p==null?void 0:p.message)||"Failed to start digest generation.",variant:"destructive"}),c("Failed to generate digest due to an error."),x([])}finally{m(!1)}};return console.log("[DigestProvider] PROVIDER RENDERING, latestDigest:",s,"isBatchSummarizing:",r,"sources:",o),e.jsx(Ns.Provider,{value:{latestDigest:s,setLatestDigest:c,latestDigestSources:o,setLatestDigestSources:x,isBatchSummarizing:r,summarizeLatestBookmarks:y},children:t})},ws=()=>{const t=n.useContext(Ns);if(t===void 0)throw new Error("useDigest must be used within a DigestProvider");return t},D=({children:t,className:s,glowColor:a="rgba(99, 102, 241, 0.3)",blur:o="md",hover:i=!0,...r})=>{const m={sm:"backdrop-blur-sm",md:"backdrop-blur-md",lg:"backdrop-blur-lg",xl:"backdrop-blur-xl"},u=i?{whileHover:{y:-4,scale:1.02,transition:{type:"spring",stiffness:300,damping:20}},whileTap:{scale:.98,transition:{type:"spring",stiffness:400,damping:25}}}:{};return e.jsxs(l.div,{className:E("relative overflow-hidden rounded-2xl","bg-white/10 dark:bg-white/5",m[o],"border border-white/20 dark:border-white/10","shadow-xl",s),initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,ease:"easeOut"},...u,...r,children:[e.jsx("div",{className:"absolute inset-0 opacity-0 transition-opacity duration-300 hover:opacity-100",style:{background:`radial-gradient(circle at var(--mouse-x, 50%) var(--mouse-y, 50%), ${a}, transparent 60%)`}}),e.jsx("div",{className:"relative z-10",children:t}),e.jsx("div",{className:"absolute inset-0 opacity-[0.015] pointer-events-none",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E")`}})]})},Q=n.forwardRef(({className:t,...s},a)=>e.jsx("div",{ref:a,className:E("rounded-lg border bg-card text-card-foreground shadow-sm",t),...s}));Q.displayName="Card";const Oe=n.forwardRef(({className:t,...s},a)=>e.jsx("div",{ref:a,className:E("flex flex-col space-y-1.5 p-6",t),...s}));Oe.displayName="CardHeader";const Ue=n.forwardRef(({className:t,...s},a)=>e.jsx("h3",{ref:a,className:E("text-2xl font-semibold leading-none tracking-tight",t),...s}));Ue.displayName="CardTitle";const Nt=n.forwardRef(({className:t,...s},a)=>e.jsx("p",{ref:a,className:E("text-sm text-muted-foreground",t),...s}));Nt.displayName="CardDescription";const wt=n.forwardRef(({className:t,...s},a)=>e.jsx("div",{ref:a,className:E("p-6 pt-0",t),...s}));wt.displayName="CardContent";const Ve=n.forwardRef(({className:t,...s},a)=>e.jsx("div",{ref:a,className:E("flex items-center p-6 pt-0",t),...s}));Ve.displayName="CardFooter";function ee({className:t,...s}){return e.jsx("div",{className:E("animate-pulse rounded-md bg-muted",t),...s})}const Ke=({className:t,children:s,...a})=>s?e.jsx(Q,{className:E("p-4 md:p-6 animate-pulse",t),...a,children:s}):e.jsx(Q,{className:E("p-4 md:p-6",t),...a,children:e.jsxs("div",{className:"animate-pulse",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-grow min-w-0",children:[e.jsx(ee,{className:"h-6 w-3/4 mb-2"}),e.jsx(ee,{className:"h-4 w-1/2 mb-3"}),e.jsx(ee,{className:"h-3 w-full mb-2"}),e.jsx(ee,{className:"h-3 w-2/3"})]}),e.jsxs("div",{className:"flex flex-col space-y-2 ml-4",children:[e.jsx(ee,{className:"h-8 w-8 rounded"}),e.jsx(ee,{className:"h-8 w-8 rounded"}),e.jsx(ee,{className:"h-8 w-8 rounded"})]})]}),e.jsxs("div",{className:"mt-4 pt-3 border-t border-border/20 flex justify-between items-center",children:[e.jsx(ee,{className:"h-3 w-24"}),e.jsx(ee,{className:"h-5 w-16"})]})]})}),ks=({lines:t=1,className:s,lineClassName:a})=>e.jsx("div",{className:E("space-y-2",s),children:[...Array(t)].map((o,i)=>e.jsx(ee,{className:E("h-4",i===t-1&&t>1?"w-5/6":"w-full",a)},i))}),xt=({items:t})=>e.jsx("div",{className:"space-y-4 md:space-y-6",children:[...Array(t)].map((s,a)=>e.jsx(Q,{className:"p-4 md:p-6 bg-background/80 backdrop-blur-sm border-border/50",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-grow min-w-0",children:[e.jsx("div",{className:"h-6 bg-muted rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-4 bg-muted rounded w-1/2 mb-3"}),e.jsx("div",{className:"h-3 bg-muted rounded w-full mb-2"}),e.jsx("div",{className:"h-3 bg-muted rounded w-2/3"})]}),e.jsxs("div",{className:"flex flex-col space-y-2 ml-4",children:[e.jsx("div",{className:"h-8 w-8 bg-muted rounded"}),e.jsx("div",{className:"h-8 w-8 bg-muted rounded"}),e.jsx("div",{className:"h-8 w-8 bg-muted rounded"})]})]}),e.jsxs("div",{className:"mt-4 pt-3 border-t border-border/20 flex justify-between items-center",children:[e.jsx("div",{className:"h-3 bg-muted rounded w-24"}),e.jsx("div",{className:"h-5 bg-muted rounded w-16"})]})]})},a))}),ge=()=>{const t=n.useRef(null),[s,a]=n.useState(!1);return n.useEffect(()=>{const o=new IntersectionObserver(([i])=>{a(i.isIntersecting)},{threshold:.1,rootMargin:"0px 0px -100px 0px"});return t.current&&o.observe(t.current),()=>{t.current&&o.unobserve(t.current)}},[]),{ref:t,isInView:s}},wr=(t=.1,s=.2)=>({container:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:t}}},item:{hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{delay:s,duration:.4}}}}),kr=Gt("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Pe=n.forwardRef(({className:t,variant:s,...a},o)=>e.jsx("div",{ref:o,role:"alert",className:E(kr({variant:s}),t),...a}));Pe.displayName="Alert";const Se=n.forwardRef(({className:t,...s},a)=>e.jsx("h5",{ref:a,className:E("mb-1 font-medium leading-none tracking-tight",t),...s}));Se.displayName="AlertTitle";const Ce=n.forwardRef(({className:t,...s},a)=>e.jsx("div",{ref:a,className:E("text-sm [&_p]:leading-relaxed",t),...s}));Ce.displayName="AlertDescription";const kt=Gt("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}}),R=n.forwardRef(({className:t,variant:s,size:a,asChild:o=!1,...i},r)=>{const m=o?Xs:"button";return e.jsx(m,{className:E(kt({variant:s,size:a,className:t})),ref:r,...i})});R.displayName="Button";const Ss=({isOpen:t,onClose:s,onSave:a,existingError:o,clearError:i})=>{const[r,m]=n.useState(""),[u,c]=n.useState(""),[x,y]=n.useState(""),[d,f]=n.useState(!1),[p,v]=n.useState(null);n.useEffect(()=>{t&&(m(""),c(""),y(""),v(null),f(!1)),o&&i&&v(o)},[t,o]);const k=async b=>{if(b.preventDefault(),!u.trim()){v("Content is required.");return}v(null),i&&i(),f(!0);const T={title:r.trim()||void 0,content:u,source:x.trim()};try{await a(T)}catch(L){const j=L.message||"Failed to save note. Please try again.";console.error("Error in AddNoteModal onSave:",j),v(j)}finally{f(!1)}},S=p||o;return t?e.jsx(l.div,{initial:{opacity:0},animate:{opacity:1},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs(D,{className:"w-full max-w-md p-6 rounded-lg shadow-xl text-card-foreground",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Add New Note"}),e.jsx("button",{type:"button",onClick:s,disabled:d,className:"p-2 rounded-full hover:bg-muted/50 disabled:opacity-50",children:e.jsx(pt,{className:"w-5 h-5"})})]}),S&&e.jsxs("div",{className:"mb-4 p-3 bg-red-500/20 border border-red-500/30 rounded-md flex items-center gap-2",children:[e.jsx(de,{className:"w-5 h-5 text-red-400 flex-shrink-0"}),e.jsx("p",{className:"text-sm text-red-300",children:S})]}),e.jsxs("form",{onSubmit:k,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"note-title",className:"block text-sm font-medium text-muted-foreground mb-1",children:"Title (Optional)"}),e.jsx("input",{type:"text",id:"note-title",value:r,onChange:b=>m(b.target.value),className:"w-full p-2 border border-border rounded-md bg-input text-foreground focus:ring-primary focus:border-primary"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{htmlFor:"note-content",className:"block text-sm font-medium text-muted-foreground mb-1",children:["Content ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{id:"note-content",value:u,onChange:b=>c(b.target.value),rows:5,className:"w-full p-2 border border-border rounded-md bg-input text-foreground focus:ring-primary focus:border-primary",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"note-source",className:"block text-sm font-medium text-muted-foreground mb-1",children:"Source (Optional)"}),e.jsx("input",{type:"text",id:"note-source",value:x,onChange:b=>y(b.target.value),className:"w-full p-2 border border-border rounded-md bg-input text-foreground focus:ring-primary focus:border-primary"})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:s,disabled:d,className:"px-4 py-2 border border-border rounded-md text-sm font-medium text-muted-foreground hover:bg-muted/50 disabled:opacity-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:d,className:"px-4 py-2 bg-primary text-primary-foreground rounded-md text-sm font-medium hover:bg-primary/90 disabled:opacity-50 disabled:bg-primary/70",children:d?"Saving...":"Save Note"})]})]})]})}):null},Sr=`${De}/api/v1`,Cr=()=>{const{latestDigest:t,latestDigestSources:s,isBatchSummarizing:a,summarizeLatestBookmarks:o,setLatestDigest:i,setLatestDigestSources:r}=ws(),{ref:m,isInView:u}=ge(),{ref:c,isInView:x}=ge(),[y,d]=n.useState(!1),[f,p]=n.useState(!1),[v,k]=n.useState(null),[S,b]=n.useState(!1),T=B(P=>P.token);console.log("[DashboardPage] Consuming from context - latestDigest:",t,"isBatchSummarizing:",a,"sources:",s);const L=()=>{console.log("[DashboardPage] handleSummarizeLatestClick called, invoking context action."),o([],()=>{})},j=()=>{if(t)if(y)speechSynthesis.cancel(),d(!1);else{const P=new SpeechSynthesisUtterance(t);P.onend=()=>d(!1),P.onerror=()=>{console.error("Speech synthesis error"),d(!1)},speechSynthesis.speak(P),d(!0)}},A=()=>{i(null),r(null),y&&(speechSynthesis.cancel(),d(!1))},Z=()=>{console.log("Add Note button clicked! Opening modal."),p(!0)},H=async P=>{if(!T){k("Authentication token not found. Please log in.");return}k(null),b(!0);try{const F=await fetch(`${Sr}/notes`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${T}`},body:JSON.stringify({title:P.title||void 0,content:P.content,source:P.source||"dashboard"})}),K=F.headers.get("content-type");if(!F.ok){let w;if(K&&K.includes("application/json"))w=await F.json();else{const C=await F.text();throw new Error(`Server returned non-JSON error: ${F.status}. Response: ${C.substring(0,100)}...`)}throw new Error(w.message||`Failed to create note. Status: ${F.status}`)}if(!K||!K.includes("application/json")){const w=await F.text();throw new Error(`Expected JSON response, but got ${K}. Response: ${w.substring(0,100)}...`)}await F.json(),console.log("Note saved successfully from dashboard"),p(!1)}catch(F){const K=F instanceof Error?F.message:"An unknown error occurred while saving the note.";console.error("Error creating note from dashboard:",K),k(K)}finally{b(!1)}};n.useEffect(()=>()=>{speechSynthesis.speaking&&(speechSynthesis.cancel(),d(!1))},[t]);const ne=[{title:"Total Items",value:"1,234",trend:12,icon:he},{title:"Active Projects",value:"24",trend:8,icon:Pa},{title:"Team Members",value:"12",trend:-2,icon:_a},{title:"This Week",value:"87",trend:15,icon:Ie}];return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-muted/20",children:[e.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[e.jsx(l.div,{className:"absolute -top-40 -right-40 w-80 h-80 bg-gradient-to-br from-primary/20 to-accent/20 rounded-full blur-3xl",animate:{scale:[1,1.2,1],rotate:[0,180,360]},transition:{duration:20,repeat:1/0,ease:"linear"}}),e.jsx(l.div,{className:"absolute -bottom-40 -left-40 w-96 h-96 bg-gradient-to-tr from-secondary/20 to-primary/20 rounded-full blur-3xl",animate:{scale:[1.2,1,1.2],rotate:[360,180,0]},transition:{duration:25,repeat:1/0,ease:"linear"}})]}),e.jsxs("div",{className:"relative z-10 container mx-auto p-4 md:p-8",children:[e.jsxs(l.div,{ref:m,initial:{opacity:0,y:30},animate:u?{opacity:1,y:0}:{opacity:0,y:30},transition:{duration:.6},className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold gradient-text mb-2",children:"Dashboard"}),e.jsx("p",{className:"text-muted-foreground text-lg",children:"Welcome back! Here's what's happening with your digital brain."})]}),e.jsx(z,{onClick:L,disabled:a,variant:"gradient",size:"lg",loading:a,className:"hover-glow",children:a?e.jsx(e.Fragment,{children:"Generating Digest..."}):e.jsxs(e.Fragment,{children:[e.jsx(he,{className:"w-5 h-5 mr-2"}),"Create Latest Digest"]})})]}),e.jsx(l.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.8,delay:.2},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:ne.map((P,F)=>e.jsx(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:F*.1+.3},children:e.jsx(D,{className:"hover-lift hover-glow cursor-pointer",children:e.jsxs(l.div,{whileHover:{scale:1.02},className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:P.title}),e.jsx(l.p,{className:"text-3xl font-bold mt-1",initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200,delay:F*.1+.5},children:P.value})]}),e.jsx("div",{className:"p-3 bg-primary/10 rounded-full",children:e.jsx(P.icon,{className:"h-6 w-6 text-primary"})})]}),e.jsxs("div",{className:"flex items-center mt-4",children:[e.jsxs(l.span,{className:`text-sm flex items-center ${P.trend>0?"text-success":"text-red-500"}`,initial:{opacity:0},animate:{opacity:1},transition:{delay:F*.1+.7},children:[e.jsx(ft,{className:`w-4 h-4 mr-1 ${P.trend<0?"rotate-180":""}`}),Math.abs(P.trend),"%"]}),e.jsx("span",{className:"text-xs text-muted-foreground ml-2",children:"from last week"})]})]})})},P.title))}),e.jsx(l.div,{ref:c,initial:{opacity:0,y:30},animate:x?{opacity:1,y:0}:{opacity:0,y:30},transition:{duration:.6,delay:.4},children:a?e.jsx(D,{className:"mb-6",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(Ae,{className:"w-5 h-5 mr-2 text-primary animate-pulse"}),e.jsx("h3",{className:"text-xl font-semibold",children:"Generating Your Digest..."})]}),e.jsx(ks,{lines:4})]})}):t?e.jsx(D,{className:"mb-6 animate-fade-in",children:e.jsxs("div",{className:"p-6",children:[e.jsxs(l.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5},className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-primary/20 to-accent/20 rounded-full mr-3",children:e.jsx(Ae,{className:"w-5 h-5 text-primary"})}),e.jsx("h3",{className:"text-xl font-semibold gradient-text",children:"Recent Bookmarks Digest"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{variant:"ghost",size:"icon",onClick:j,title:y?"Stop Reading":"Read Aloud",children:e.jsx(us,{className:`w-5 h-5 ${y?"text-destructive":"text-primary"}`})}),e.jsx(R,{variant:"ghost",size:"icon",onClick:A,title:"Clear Digest",children:e.jsx(xs,{className:"w-5 h-5 text-muted-foreground hover:text-destructive"})})]})]}),e.jsxs(l.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.7,delay:.2},children:[t.startsWith("OPENAI_API_KEY not configured")||t.startsWith("Failed to extract summary")||t.startsWith("OpenAI API error")||t.startsWith("Content was empty")||t.startsWith("Could not generate a digest")||t.startsWith("No valid content")||t.startsWith("No new bookmarks")?e.jsxs(Pe,{variant:"destructive",className:"glass border-red-500/20",children:[e.jsx(de,{className:"h-4 w-4"}),e.jsx(Se,{children:"Digest Generation Issue"}),e.jsx(Ce,{children:t})]}):e.jsx("p",{className:"text-foreground/90 whitespace-pre-wrap leading-relaxed",children:t}),s&&s.length>0&&!t.startsWith("Could not generate a digest")&&!t.startsWith("No valid content")&&!t.startsWith("No new bookmarks")&&!t.startsWith("No eligible bookmarks")&&!t.startsWith("Failed to generate digest")&&e.jsxs(l.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},className:"mt-6 pt-4 border-t border-border/50",children:[e.jsx("h5",{className:"text-sm font-semibold mb-3 text-muted-foreground",children:"Sources:"}),e.jsx("div",{className:"grid gap-2",children:s.map((P,F)=>e.jsxs(l.a,{href:P.originalUrl,target:"_blank",rel:"noopener noreferrer",className:"group flex items-center p-3 rounded-lg bg-muted/20 hover:bg-muted/40 transition-all duration-200 border border-border/20",initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{duration:.3,delay:F*.05+.5},whileHover:{scale:1.02},children:[e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("p",{className:"text-sm font-medium text-foreground group-hover:text-primary transition-colors truncate",children:P.title||P.originalUrl.substring(0,50)+"..."})}),e.jsx(_e,{className:"w-4 h-4 ml-2 text-muted-foreground group-hover:text-primary transition-colors flex-shrink-0"})]},P._id))})]})]})]})}):null}),e.jsx(l.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.8,delay:.6},children:e.jsx(D,{className:"text-center",children:e.jsxs("div",{className:"p-8",children:[e.jsx(l.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200,delay:.8},className:"w-16 h-16 bg-gradient-to-br from-primary to-accent rounded-full mx-auto mb-4 flex items-center justify-center",children:e.jsx(Ae,{className:"w-8 h-8 text-white"})}),e.jsx("h2",{className:"text-2xl font-bold gradient-text mb-2",children:"Your Digital Brain is Ready"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Start capturing ideas, organizing thoughts, and building your second brain."}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-3",children:[e.jsxs(z,{variant:"primary",onClick:Z,children:[e.jsx(he,{className:"w-4 h-4 mr-2 pointer-events-none"}),"Add Note"]}),e.jsxs(z,{variant:"secondary",children:[e.jsx(_e,{className:"w-4 h-4 mr-2"}),"Save Bookmark"]})]})]})})})]}),e.jsx(Ss,{isOpen:f,onClose:()=>{p(!1),k(null)},onSave:H,existingError:v,clearError:()=>k(null)})]})},Cs=`${De}/api/v1`,ht=async()=>{const t=B.getState().token;if(!t)throw new Error("Not authenticated");const s=await fetch(`${Cs}/capture/telegram`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`}}),a=await s.json();if(!s.ok)throw new Error(a.message||"Failed to fetch captured items");return a},Tr=async t=>{const s=B.getState().token;if(!s)throw new Error("Not authenticated for deletion");const a=await fetch(`${Cs}/capture/telegram/${t}`,{method:"DELETE",headers:{Authorization:`Bearer ${s}`}}),o=a.headers.get("content-type");let i={message:`Item ${t} processed.`};if(o&&o.indexOf("application/json")!==-1)i=await a.json();else if(!(a.status===200&&a.bodyUsed===!1)){if(!a.ok)try{const r=await a.json();throw new Error(r.message||`Failed to delete item ${t}. Status: ${a.status}`)}catch{throw new Error(`Failed to delete item ${t}. Status: ${a.status} ${a.statusText}`)}}if(!a.ok)throw new Error(i.message||`Failed to delete item ${t}. Status: ${a.status}`);return i},ce=n.forwardRef(({className:t,type:s,...a},o)=>e.jsx("input",{type:s,className:E("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:o,...a}));ce.displayName="Input";const Er={}.VITE_SOCKET_IO_URL||(typeof window<"u"?window.location.origin:"http://localhost:3001"),Ts=n.createContext(void 0),Ar=({children:t})=>{const[s,a]=n.useState([]),[o,i]=n.useState(!1),[r,m]=n.useState(null),u=B(d=>d.isAuthenticated),c=B(d=>d.token),x=async()=>{if(!u||!c){a([]);return}try{const d=await ht();a(d.sort((f,p)=>new Date(p.receivedAt).getTime()-new Date(f.receivedAt).getTime()))}catch(d){console.error("[TelegramContext] Error fetching initial Telegram items:",d),a([])}},y=async d=>{if(!u||!c)throw console.error("[TelegramContext] Not authenticated, cannot delete item."),new Error("Not authenticated");try{await Tr(d),a(f=>f.filter(p=>p._id!==d)),console.log(`[TelegramContext] Item ${d} deleted successfully.`)}catch(f){throw console.error(`[TelegramContext] Error deleting item ${d}:`,f),f}};return n.useEffect(()=>{x();const d=Zs(Er,{auth:{token:c},autoConnect:!1});return m(d),u&&c&&d.connect(),d.on("connect",()=>{console.log("[Socket.IO] Connected to server"),i(!0)}),d.on("disconnect",()=>{console.log("[Socket.IO] Disconnected from server"),i(!1)}),d.on("new_telegram_item",f=>{console.log("[Socket.IO] Received new_telegram_item:",f),a(p=>p.find(k=>k._id===f._id)?p:[f,...p].sort((k,S)=>new Date(S.receivedAt).getTime()-new Date(k.receivedAt).getTime()))}),()=>{console.log("[Socket.IO] Cleaning up socket connection"),d.off("connect"),d.off("disconnect"),d.off("new_telegram_item"),d.connected&&d.close(),m(null)}},[u,c]),e.jsx(Ts.Provider,{value:{telegramItems:s,isConnected:o,fetchInitialItems:x,deleteTelegramItem:y},children:t})},Es=()=>{const t=n.useContext(Ts);if(t===void 0)throw new Error("useTelegram must be used within a TelegramProvider");return t},As=()=>{const{telegramItems:t,isConnected:s,deleteTelegramItem:a}=Es(),o=async(r,m)=>{const u=m?`"${m.substring(0,20)}..."`:`item ${r}`;if(window.confirm(`Are you sure you want to delete ${u}?`))try{await a(r)}catch(c){console.error("Error deleting item from feed:",c),alert(`Failed to delete item: ${c.message}`)}},i=r=>r.source==="telegram_voice_memo"?r.title||r.content||r.text||e.jsx("span",{className:"italic",children:"(Processed Voice Memo)"}):r.text||e.jsxs("span",{className:"italic",children:["(",r.messageType||"No text",")"]});return e.jsxs("div",{className:"p-4 border rounded-lg shadow-md bg-card",children:[e.jsx("h2",{className:"text-xl font-semibold mb-3 text-card-foreground",children:"Telegram Feed"}),e.jsxs("p",{className:"mb-2 text-sm text-muted-foreground",children:["Socket Status: ",s?e.jsx("span",{className:"text-green-500",children:"Connected"}):e.jsx("span",{className:"text-red-500",children:"Disconnected"})]}),t.length===0&&e.jsx("p",{className:"text-muted-foreground",children:"No Telegram messages yet. Send a message to your bot!"}),e.jsxs("ul",{className:"space-y-3 max-h-96 overflow-y-auto pr-2",children:[" ",t.map(r=>e.jsxs("li",{className:"p-3 border rounded-md bg-background shadow-sm relative group",children:[e.jsx("button",{onClick:()=>o(r._id,r.title||r.content||r.text||r.messageType),className:"absolute top-1.5 right-1.5 p-1 text-muted-foreground hover:text-destructive opacity-0 group-hover:opacity-100 transition-opacity focus:opacity-100",title:"Delete item",children:e.jsx(pt,{size:16})}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between items-start sm:items-center mb-1",children:[e.jsxs("span",{className:"font-medium text-sm text-primary",children:[r.fromUsername||"Unknown User"," (",r.chatTitle||"DM",")"]}),e.jsx("span",{className:"text-xs text-muted-foreground mt-1 sm:mt-0 text-left sm:text-right",children:new Date(r.receivedAt).toLocaleString()})]}),e.jsx("p",{className:"text-sm text-foreground mb-1",children:i(r)}),r.source==="telegram_voice_memo"&&r.rawTranscription&&e.jsxs("div",{className:"mt-2 pt-2 border-t border-border",children:[e.jsxs("div",{className:"flex items-center text-xs text-muted-foreground mb-1",children:[e.jsx(za,{size:14,className:"mr-1.5"}),e.jsx("span",{children:"Original Transcription:"})]}),e.jsx("p",{className:"text-xs text-muted-foreground whitespace-pre-wrap bg-muted/50 p-2 rounded-md",children:r.rawTranscription})]}),r.messageType==="photo"&&r.mediaLocalUrl&&e.jsx("div",{className:"mt-2",children:e.jsx("img",{src:`${ut}${r.mediaLocalUrl}`,alt:"Telegram Photo",className:"w-full sm:max-w-xs max-h-64 rounded-md border object-cover"})}),r.urls&&r.urls.length>0&&e.jsx("div",{className:"mt-1",children:r.urls.map((m,u)=>e.jsx("a",{href:m,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-indigo-500 hover:underline mr-2",children:m},u))})]},r._id))]})]})},Ir=()=>{const[t,s]=n.useState([]),[a,o]=n.useState(!0),[i,r]=n.useState(null),[m,u]=n.useState(""),c=B(j=>j.token),x=B(j=>j.isAuthenticated),{ref:y,isInView:d}=ge(),{ref:f,isInView:p}=ge(),{ref:v,isInView:k}=ge(),S=wr(.1,.2);n.useEffect(()=>{(async()=>{console.log("[InboxPage] Attempting to fetch items. IsAuthenticated:",x,"Token Present:",!!c),console.log("[InboxPage] Full authStore state before API call:",B.getState()),c&&console.log("[InboxPage] Token value (first 20 chars):",c.substring(0,20)+"...");try{o(!0);const A=await ht();s(A),r(null)}catch(A){console.error("Error fetching inbox items:",A),r(A.message||"Failed to load inbox items.")}finally{o(!1)}})()},[c,x]);const b=()=>{o(!0),r(null),(async()=>{try{const A=await ht();s(A)}catch(A){r(A.message||"Failed to load inbox items.")}finally{o(!1)}})()},T=t.filter(j=>{var Z,H,ne;if(!m)return!0;const A=m.toLowerCase();return((Z=j.text)==null?void 0:Z.toLowerCase().includes(A))||((H=j.fromUsername)==null?void 0:H.toLowerCase().includes(A))||((ne=j.chatTitle)==null?void 0:ne.toLowerCase().includes(A))}),L={total:t.length,today:t.filter(j=>{const A=new Date().toDateString();return new Date(j.receivedAt).toDateString()===A}).length,withLinks:t.filter(j=>j.urls&&j.urls.length>0).length,uniqueChats:new Set(t.map(j=>j.chatId)).size};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-muted/20",children:e.jsxs("div",{className:"container mx-auto p-3 sm:p-4 md:p-8 space-y-6 sm:space-y-8",children:[e.jsxs(l.div,{ref:y,initial:{opacity:0,y:30},animate:d?{opacity:1,y:0}:{opacity:0,y:30},transition:{duration:.6},className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center mb-4",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-primary/20 to-accent/20 rounded-full mr-4",children:e.jsx(ls,{className:"w-8 h-8 text-primary"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold gradient-text",children:"Inbox"}),e.jsx("p",{className:"text-muted-foreground text-md sm:text-lg mt-1 sm:mt-2",children:"Your captured content from all sources"})]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-3 sm:gap-4 mt-6 sm:mt-8",children:[{label:"Total Items",value:L.total,icon:lt},{label:"Today",value:L.today,icon:bt},{label:"With Links",value:L.withLinks,icon:_e},{label:"Chats",value:L.uniqueChats,icon:Be}].map((j,A)=>e.jsx(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:A*.1+.3},children:e.jsx(D,{className:"text-center hover-lift",children:e.jsxs("div",{className:"p-4",children:[e.jsx(j.icon,{className:"w-6 h-6 text-primary mx-auto mb-2"}),e.jsx("p",{className:"text-2xl font-bold",children:j.value}),e.jsx("p",{className:"text-xs text-muted-foreground",children:j.label})]})})},j.label))})]}),e.jsx(l.div,{ref:f,initial:{opacity:0,y:30},animate:p?{opacity:1,y:0}:{opacity:0,y:30},transition:{duration:.6,delay:.2},children:e.jsx(D,{children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-success/20 to-primary/20 rounded-full mr-3",children:e.jsx(ft,{className:"w-5 h-5 text-success"})}),e.jsx("h2",{className:"text-2xl font-semibold gradient-text",children:"Live Feed"}),e.jsx("div",{className:"ml-auto flex items-center space-x-2",children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:"w-2 h-2 bg-success rounded-full animate-pulse"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Live"})]})})]}),e.jsx(As,{})]})})}),e.jsx(l.div,{ref:v,initial:{opacity:0,y:30},animate:k?{opacity:1,y:0}:{opacity:0,y:30},transition:{duration:.6,delay:.4},children:e.jsx(D,{children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-6 gap-4",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold gradient-text",children:"Captured Items History"}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center space-y-3 sm:space-y-0 sm:space-x-3 w-full sm:w-auto",children:[e.jsxs("div",{className:"relative w-full sm:w-auto",children:[e.jsx(Ze,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground z-10"}),e.jsx(ce,{type:"text",placeholder:"Search items...",value:m,onChange:j=>u(j.target.value),className:"w-full pl-10 pr-4 py-2 text-sm bg-background/50 hover:bg-background/70 focus:bg-background/70 border-border/50 focus:ring-primary focus:border-primary"})]}),e.jsxs(z,{variant:"ghost",size:"sm",onClick:b,loading:a,className:"hover-glow w-full sm:w-auto",children:[e.jsx(hs,{className:"w-4 h-4"}),e.jsx("span",{className:"sm:hidden ml-2",children:"Refresh"})]})]})]}),a&&e.jsx(l.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:e.jsx(xt,{items:6})}),i&&e.jsx(l.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:e.jsxs(Pe,{variant:"destructive",className:"glass border-red-500/20",children:[e.jsx($a,{className:"h-4 w-4"}),e.jsx(Se,{children:"Error Loading History"}),e.jsx(Ce,{children:i})]})}),!a&&!i&&T.length===0&&e.jsxs(l.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 bg-muted/20 rounded-full mx-auto mb-4 flex items-center justify-center",children:e.jsx(lt,{className:"w-8 h-8 text-muted-foreground"})}),e.jsx("p",{className:"text-muted-foreground",children:m?"No items match your search.":"No historical items captured yet."})]}),!a&&!i&&T.length>0&&e.jsx(l.div,{variants:S.container,initial:"hidden",animate:"visible",className:"space-y-4",children:T.map((j,A)=>e.jsx(l.div,{variants:S.item,whileHover:{scale:1.01},className:"group",children:e.jsx(D,{className:"hover-lift transition-all duration-200",children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between items-start sm:items-center mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center",children:e.jsx(Be,{className:"w-4 h-4 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:j.fromUsername||"Unknown User"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:j.chatTitle||`Chat ${j.chatId}`})]})]}),e.jsxs("div",{className:"text-left sm:text-right",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(j.receivedAt).toLocaleDateString()}),e.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(j.receivedAt).toLocaleTimeString()})]})]}),e.jsx("p",{className:"text-foreground/90 mb-3 leading-relaxed",children:j.text||"[No text content]"}),j.urls&&j.urls.length>0&&e.jsxs("div",{className:"mt-3 p-3 bg-muted/20 rounded-lg",children:[e.jsxs("p",{className:"text-xs font-medium text-muted-foreground mb-2 flex items-center",children:[e.jsx(_e,{className:"w-3 h-3 mr-1"}),"Links (",j.urls.length,")"]}),e.jsx("div",{className:"space-y-1",children:j.urls.map((Z,H)=>e.jsx("a",{href:Z,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-primary hover:text-primary/80 transition-colors block truncate",children:Z},H))})]}),e.jsxs("div",{className:"flex justify-between items-center mt-3 pt-3 border-t border-border/20",children:[e.jsx("span",{className:"text-xs text-muted-foreground px-2 py-1 bg-muted/20 rounded",children:j.messageType}),j.mediaFileId&&e.jsxs("span",{className:"text-xs text-muted-foreground",children:["Media: ",j.mediaFileId.substring(0,10),"..."]})]})]})})},j._id))})]})})})]})})},Lr="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",J=n.forwardRef(({className:t,...s},a)=>e.jsx("label",{ref:a,className:E(Lr,t),...s}));J.displayName="Label";const Dr=()=>{const[t,s]=n.useState(""),[a,o]=n.useState(""),[i,r]=n.useState(!1),m=B(c=>c.isAuthenticated),u=async c=>{var d,f;if(c.preventDefault(),o(""),r(!0),!m){o("Error: You must be logged in to link a chat."),r(!1);return}const x=B.getState().token;console.log("[LinkTelegramChat] Token from store just before API call:",x?"Present":"Absent"),x&&console.log("[LinkTelegramChat] Token value (first 20 chars):",x.substring(0,20)+"...");const y=parseInt(t,10);if(!t||isNaN(y)){o("Please enter a valid numeric Chat ID."),r(!1);return}try{const p=await Y.post("/users/me/telegram-chats",{chatId:y});o(p.data.message||"Chat ID submitted successfully!"),console.log("Updated monitored chats:",p.data.monitoredTelegramChats),s("")}catch(p){const v=((f=(d=p.response)==null?void 0:d.data)==null?void 0:f.message)||"Failed to add chat ID. Please try again.";o(v),console.error("Error linking Telegram chat:",p)}r(!1)};return m?e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3 text-foreground",children:"Link Telegram Chat"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:'Enter a Telegram Chat ID that you want this Synapse account to monitor for new messages. You can often find your Chat ID by messaging a bot like "@userinfobot" on Telegram.'}),e.jsxs("form",{onSubmit:u,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(J,{htmlFor:"chatId",className:"text-foreground",children:"Telegram Chat ID"}),e.jsx(ce,{id:"chatId",type:"text",value:t,onChange:c=>s(c.target.value),placeholder:"E.g., 123456789",disabled:i,className:"mt-1"})]}),e.jsx(z,{type:"submit",loading:i,variant:"primary",className:"w-full",children:"Link Chat ID"})]}),a&&e.jsx("p",{className:`mt-3 text-sm ${a.startsWith("Error:")||a.startsWith("Please enter")?"text-destructive":"text-success"}`,children:a})]}):e.jsx("p",{className:"text-muted-foreground",children:"Please log in to link your Telegram chats."})},ae=({items:t=20,className:s="absolute inset-0 overflow-hidden pointer-events-none",particleClassName:a,type:o="default"})=>{const i=()=>o==="error"?"absolute w-2 h-2 bg-red-500/30 rounded-full":"absolute w-2 h-2 bg-white/20 rounded-full";return e.jsx("div",{className:s,children:[...Array(t)].map((r,m)=>e.jsx(l.div,{className:a||i(),style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,zIndex:-1},initial:{opacity:0,y:0},animate:{y:[Math.random()*-100-50,Math.random()*100+50],x:[Math.random()*-100-50,Math.random()*100+50],opacity:[0,.8,0],scale:[.5,Math.random()*1+.5,.5]},transition:{duration:5+Math.random()*10,repeat:1/0,delay:Math.random()*5,ease:"easeInOut"}},m))})},Pr=()=>{const t={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2}}},s={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{type:"spring",stiffness:100}}},a=[{icon:e.jsx(Ma,{className:"w-6 h-6 text-blue-400"}),iconBg:"bg-blue-500/20",title:"Telegram Integration",description:"Connect your Telegram account to receive notifications and capture content.",content:e.jsx(Dr,{})},{icon:e.jsx(Be,{className:"w-6 h-6 text-emerald-400"}),iconBg:"bg-emerald-500/20",title:"Profile Settings",description:"Manage your personal information and preferences",content:e.jsx("p",{className:"text-gray-300/60",children:"Profile settings will be available in a future update."})},{icon:e.jsx(Ra,{className:"w-6 h-6 text-red-400"}),iconBg:"bg-red-500/20",title:"Security & Privacy",description:"Control your account security and privacy settings",content:e.jsx("p",{className:"text-gray-300/60",children:"Security settings will be available in a future update."})},{icon:e.jsx(Fa,{className:"w-6 h-6 text-purple-400"}),iconBg:"bg-purple-500/20",title:"Appearance",description:"Customize the look and feel of your interface",content:e.jsx("p",{className:"text-gray-300/60",children:"Theme and appearance settings will be available in a future update."})}];return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-muted/20 relative overflow-hidden",children:[e.jsx(ae,{items:25,particleClassName:"bg-primary/10"}),e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e.jsx(l.div,{className:"absolute w-96 h-96 bg-gradient-to-r from-primary/10 to-accent/10 rounded-full blur-3xl",style:{top:"10%",right:"10%"},animate:{x:[0,-40,0],y:[0,30,0],scale:[1,1.1,1]},transition:{duration:20,repeat:1/0,ease:"easeInOut"}}),e.jsx(l.div,{className:"absolute w-80 h-80 bg-gradient-to-r from-secondary/10 to-primary/10 rounded-full blur-3xl",style:{bottom:"20%",left:"10%"},animate:{x:[0,40,0],y:[0,-20,0],scale:[1,.9,1]},transition:{duration:25,repeat:1/0,ease:"easeInOut"}})]}),e.jsxs(l.div,{className:"relative z-10 container mx-auto p-6",variants:t,initial:"hidden",animate:"visible",children:[e.jsxs(l.div,{className:"text-center mb-12",variants:s,children:[e.jsxs("div",{className:"flex items-center justify-center mb-4",children:[e.jsx(l.div,{animate:{rotate:[0,5,-5,0]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},children:e.jsx(Xe,{className:"w-12 h-12 text-muted-foreground"})}),e.jsx(l.div,{className:"ml-2",animate:{scale:[1,1.1,1]},transition:{duration:2,repeat:1/0},children:e.jsx(pe,{className:"w-6 h-6 text-amber-400"})})]}),e.jsx("h1",{className:"text-4xl md:text-6xl font-bold gradient-text mb-4",children:"Settings"}),e.jsx("p",{className:"text-muted-foreground text-lg max-w-2xl mx-auto",children:"Customize your SYNAPSE experience and manage your preferences"})]}),e.jsx(l.div,{className:"space-y-8 max-w-4xl mx-auto",variants:t,initial:"hidden",animate:"visible",children:a.map((o,i)=>e.jsx(l.div,{variants:s,children:e.jsxs(D,{className:"p-8",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[" ",e.jsxs("div",{className:`p-3 rounded-lg ${o.iconBg}`,children:[" ",o.icon]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-foreground",children:o.title}),e.jsx("p",{className:"text-muted-foreground/80",children:o.description})]})]}),Je.isValidElement(o.content)&&o.content.type==="p"&&o.content.props.children.includes("future update")?Je.cloneElement(o.content,{className:"text-muted-foreground/70"}):o.content]})},i))})]})]})},_r=`${De}/api/v1`,Is=`${_r}/auth`,zr=async t=>{const s=await fetch(`${Is}/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),a=await s.json();if(!s.ok)throw new Error(a.message||"Failed to register");return a},$r=async t=>{const s=await fetch(`${Is}/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),a=await s.json();if(!s.ok)throw new Error(a.message||"Failed to login");return a},Mr=()=>{const[t,s]=n.useState(""),[a,o]=n.useState(""),[i,r]=n.useState(null),[m,u]=n.useState(!1),c=B(k=>k.login),x=gt(),y=async k=>{k.preventDefault(),r(null),u(!0);try{const S=await $r({email:t,password:a}),b={user:{id:S._id,email:S.email,fullName:S.fullName},token:S.token};c(b),console.log("[LoginPage] Email/Pass Login Success - Zustand store updated. Token present:",!!B.getState().token),console.log("[LoginPage] Email/Pass Login Success - User:",B.getState().user),x("/dashboard")}catch(S){console.error("Login failed:",S),r(S.message||"An unexpected error occurred during login.")}u(!1)},d=()=>{console.log("[LoginPage DEBUG] Checking store manually. Token present:",!!B.getState().token),console.log("[LoginPage DEBUG] User:",B.getState().user),alert(`Token Present: ${!!B.getState().token}`)},v=Qs({onSuccess:async k=>{console.log("Google Sign-In (hook) Success, tokenResponse:",k),u(!0),r(null);try{const S=await fetch("https://www.googleapis.com/oauth2/v3/userinfo",{headers:{Authorization:`Bearer ${k.access_token}`}});if(!S.ok)throw new Error("Failed to fetch user info from Google");const b=await S.json();console.log("Fetched Google UserInfo:",b);const T={user:{id:b.sub,email:b.email,fullName:b.name},token:k.access_token};c(T),console.log("[LoginPage] Google Login (hook) Success - Zustand store updated."),x("/dashboard")}catch(S){console.error("Error during Google Sign-In post-processing:",S),r(S.message||"An error occurred after Google Sign-In.")}u(!1)},onError:()=>{console.error("Google Sign-In Failed"),r("Google Sign-In failed. Please try again or use email/password.")},flow:"implicit"});return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-violet-900 via-blue-900 to-purple-900 relative overflow-hidden flex items-center justify-center p-4",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsx(l.div,{className:"absolute w-96 h-96 bg-gradient-to-r from-violet-400/20 to-purple-400/20 rounded-full blur-3xl",style:{top:"20%",left:"20%"},animate:{x:[0,50,0],y:[0,-30,0],scale:[1,1.1,1]},transition:{duration:15,repeat:1/0,ease:"easeInOut"}}),e.jsx(l.div,{className:"absolute w-80 h-80 bg-gradient-to-r from-blue-400/20 to-cyan-400/20 rounded-full blur-3xl",style:{bottom:"20%",right:"20%"},animate:{x:[0,-40,0],y:[0,40,0],scale:[1,.9,1]},transition:{duration:18,repeat:1/0,ease:"easeInOut"}})]}),e.jsx(ae,{items:18}),e.jsxs(l.div,{className:"relative z-10 w-full max-w-md",initial:{opacity:0,y:50,scale:.9},animate:{opacity:1,y:0,scale:1},transition:{duration:.8},children:[e.jsxs(D,{className:"p-8 w-full",children:[e.jsxs(l.div,{className:"text-center mb-8",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsxs(l.div,{className:"relative",animate:{rotate:[0,5,-5,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:[e.jsx(Le,{className:"w-12 h-12 text-violet-300"}),e.jsx(l.div,{className:"absolute -top-1 -right-1",animate:{scale:[1,1.2,1]},transition:{duration:1.5,repeat:1/0},children:e.jsx(pe,{className:"w-4 h-4 text-amber-300"})})]})}),e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-violet-200 to-blue-200 bg-clip-text text-transparent mb-2",children:"Welcome Back"}),e.jsx("p",{className:"text-blue-100/70",children:"Sign in to your SYNAPSE account"})]}),i&&e.jsx(l.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3},className:"mb-6",children:e.jsxs(Pe,{variant:"destructive",className:"glass border-red-500/30 bg-red-500/10 text-red-200",children:[e.jsx(de,{className:"h-4 w-4 text-red-300"}),e.jsx(Se,{className:"text-red-200 font-semibold",children:"Login Failed"}),e.jsx(Ce,{className:"text-red-300/90",children:i})]})}),e.jsxs(l.form,{onSubmit:y,className:"space-y-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(J,{htmlFor:"email",className:"text-blue-100 font-medium",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(gs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-blue-300"}),e.jsx(ce,{id:"email",type:"email",placeholder:"your@email.com",required:!0,value:t,onChange:k=>s(k.target.value),disabled:m,className:"pl-10 bg-white/5 border-white/10 text-white placeholder:text-blue-200/50 focus:border-violet-400 focus:ring-violet-400/20"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(J,{htmlFor:"password",className:"text-blue-100 font-medium",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(ps,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-blue-300"}),e.jsx(ce,{id:"password",type:"password",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",required:!0,value:a,onChange:k=>o(k.target.value),disabled:m,className:"pl-10 bg-white/5 border-white/10 text-white placeholder:text-blue-200/50 focus:border-violet-400 focus:ring-violet-400/20"})]})]}),e.jsx(z,{type:"submit",className:"w-full bg-gradient-to-r from-violet-500 to-purple-600 hover:from-violet-600 hover:to-purple-700 text-white shadow-lg shadow-violet-500/25",disabled:m,size:"lg",children:m?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(l.div,{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}}),"Signing In..."]}):e.jsxs("span",{className:"flex items-center gap-2",children:["Sign In",e.jsx(jt,{className:"w-4 h-4"})]})})]}),e.jsxs("div",{className:"my-6 flex items-center",children:[e.jsx("div",{className:"flex-grow border-t border-blue-300/20"}),e.jsx("span",{className:"mx-4 text-blue-200/70 text-sm",children:"OR"}),e.jsx("div",{className:"flex-grow border-t border-blue-300/20"})]}),e.jsx(z,{onClick:()=>v(),variant:"secondary",className:"w-full bg-white/90 hover:bg-white text-gray-700 hover:text-gray-900 shadow-md hover:shadow-lg border border-gray-300/50",size:"lg",disabled:m,children:e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx(Ba,{className:"w-5 h-5"})," ","Sign in with Google"]})}),B.getState().isAuthenticated&&e.jsx(l.div,{className:"mt-4",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:e.jsx(R,{onClick:d,variant:"outline",className:"w-full bg-white/5 border-white/10 text-white hover:bg-white/10",children:"DEBUG: Check Auth Store"})}),e.jsx(l.div,{className:"text-center",initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.6},children:e.jsxs("p",{className:"text-blue-100/70 text-sm",children:["Don't have an account?"," ",e.jsx(ue,{to:"/register",className:"text-violet-300 hover:text-violet-200 font-medium transition-colors",children:"Create one now"})]})})]}),e.jsx(l.div,{className:"text-center mt-6",initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.7},children:e.jsx(ue,{to:"/",className:"text-blue-200/70 hover:text-blue-100 text-sm transition-colors",children:"â† Back to Home"})})]})]})},Rr=()=>{const[t,s]=n.useState(""),[a,o]=n.useState(""),[i,r]=n.useState(""),[m,u]=n.useState(null),[c,x]=n.useState(!1),y=B(p=>p.login),d=gt(),f=async p=>{p.preventDefault(),u(null),x(!0);try{const v=await zr({fullName:t,email:a,password:i});y({user:{id:v._id,email:v.email,fullName:v.fullName},token:v.token}),d("/dashboard")}catch(v){console.error("Registration failed:",v),u(v.message||"An unexpected error occurred during registration.")}x(!1)};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-emerald-900 via-teal-900 to-cyan-900 relative overflow-hidden flex items-center justify-center p-4",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsx(l.div,{className:"absolute w-96 h-96 bg-gradient-to-r from-emerald-400/20 to-teal-400/20 rounded-full blur-3xl",style:{top:"15%",left:"15%"},animate:{x:[0,60,0],y:[0,-40,0],scale:[1,1.1,1]},transition:{duration:16,repeat:1/0,ease:"easeInOut"}}),e.jsx(l.div,{className:"absolute w-80 h-80 bg-gradient-to-r from-cyan-400/20 to-blue-400/20 rounded-full blur-3xl",style:{bottom:"15%",right:"15%"},animate:{x:[0,-50,0],y:[0,30,0],scale:[1,.9,1]},transition:{duration:20,repeat:1/0,ease:"easeInOut"}})]}),e.jsx(ae,{items:15}),e.jsxs(l.div,{className:"relative z-10 w-full max-w-md",initial:{opacity:0,y:50,scale:.9},animate:{opacity:1,y:0,scale:1},transition:{duration:.8},children:[e.jsxs(D,{className:"p-8 w-full",children:[e.jsxs(l.div,{className:"text-center mb-8",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsxs(l.div,{className:"relative",animate:{rotate:[0,5,-5,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:[e.jsx(Le,{className:"w-12 h-12 text-emerald-300"}),e.jsx(l.div,{className:"absolute -top-1 -right-1",animate:{scale:[1,1.2,1]},transition:{duration:1.5,repeat:1/0},children:e.jsx(pe,{className:"w-4 h-4 text-amber-300"})})]})}),e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-emerald-200 to-teal-200 bg-clip-text text-transparent mb-2",children:"Join SYNAPSE"}),e.jsx("p",{className:"text-teal-100/70",children:"Create your account and unlock your potential"})]}),m&&e.jsx(l.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3},className:"mb-6",children:e.jsxs(Pe,{variant:"destructive",className:"glass border-red-500/30 bg-red-500/10 text-red-200",children:[e.jsx(de,{className:"h-4 w-4 text-red-300"}),e.jsx(Se,{className:"text-red-200 font-semibold",children:"Registration Failed"}),e.jsx(Ce,{className:"text-red-300/90",children:m})]})}),e.jsxs(l.form,{onSubmit:f,className:"space-y-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(J,{htmlFor:"fullName",className:"text-teal-100 font-medium",children:"Full Name"}),e.jsxs("div",{className:"relative",children:[e.jsx(Be,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-teal-300"}),e.jsx(ce,{id:"fullName",type:"text",placeholder:"John Doe",required:!0,value:t,onChange:p=>s(p.target.value),disabled:c,className:"pl-10 bg-white/5 border-white/10 text-white placeholder:text-teal-200/50 focus:border-emerald-400 focus:ring-emerald-400/20"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(J,{htmlFor:"email",className:"text-teal-100 font-medium",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(gs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-teal-300"}),e.jsx(ce,{id:"email",type:"email",placeholder:"your@email.com",required:!0,value:a,onChange:p=>o(p.target.value),disabled:c,className:"pl-10 bg-white/5 border-white/10 text-white placeholder:text-teal-200/50 focus:border-emerald-400 focus:ring-emerald-400/20"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(J,{htmlFor:"password",className:"text-teal-100 font-medium",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(ps,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-teal-300"}),e.jsx(ce,{id:"password",type:"password",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",required:!0,value:i,onChange:p=>r(p.target.value),disabled:c,className:"pl-10 bg-white/5 border-white/10 text-white placeholder:text-teal-200/50 focus:border-emerald-400 focus:ring-emerald-400/20"})]})]}),e.jsx(z,{type:"submit",className:"w-full bg-gradient-to-r from-emerald-500 to-teal-600 hover:from-emerald-600 hover:to-teal-700 text-white shadow-lg shadow-emerald-500/25",disabled:c,size:"lg",children:c?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(l.div,{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}}),"Creating Account..."]}):e.jsxs("span",{className:"flex items-center gap-2",children:["Create Account",e.jsx(jt,{className:"w-4 h-4"})]})})]}),e.jsx(l.div,{className:"text-center mt-6",initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.6},children:e.jsxs("p",{className:"text-teal-100/70 text-sm",children:["Already have an account?"," ",e.jsx(ue,{to:"/login",className:"text-emerald-300 hover:text-emerald-200 font-medium transition-colors",children:"Sign in here"})]})})]}),e.jsx(l.div,{className:"text-center mt-6",initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.7},children:e.jsx(ue,{to:"/",className:"text-teal-200/70 hover:text-teal-100 text-sm transition-colors",children:"â† Back to Home"})})]})]})},Fr=()=>{const{telegramItems:t,isConnected:s,deleteTelegramItem:a}=Es(),{ref:o,isInView:i}=ge(),r=t.filter(x=>x.messageType==="photo"&&x.mediaLocalUrl),m={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2}}},u={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{type:"spring",stiffness:100}}},c=async(x,y)=>{if(window.confirm(`Are you sure you want to delete this image (${y})?`))try{await a(x)}catch(d){console.error("Error deleting image:",d),alert(`Failed to delete image: ${d.message}`)}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-rose-900 via-pink-900 to-purple-900 relative overflow-hidden",children:[e.jsx(ae,{items:30}),e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e.jsx(l.div,{className:"absolute w-96 h-96 bg-gradient-to-r from-pink-400/20 to-rose-400/20 rounded-full blur-3xl",style:{top:"10%",right:"10%"},animate:{x:[0,-40,0],y:[0,30,0],scale:[1,1.1,1]},transition:{duration:20,repeat:1/0,ease:"easeInOut"}}),e.jsx(l.div,{className:"absolute w-80 h-80 bg-gradient-to-r from-purple-400/20 to-violet-400/20 rounded-full blur-3xl",style:{bottom:"20%",left:"10%"},animate:{x:[0,50,0],y:[0,-25,0],scale:[1,.9,1]},transition:{duration:25,repeat:1/0,ease:"easeInOut"}})]}),e.jsxs(l.div,{className:"relative z-10 container mx-auto p-6",variants:m,initial:"hidden",animate:"visible",children:[e.jsxs(l.div,{ref:o,className:"text-center mb-12",variants:u,children:[e.jsxs("div",{className:"flex items-center justify-center mb-4",children:[e.jsx(l.div,{animate:{rotate:[0,5,-5,0]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},children:e.jsx(cs,{className:"w-12 h-12 text-pink-400"})}),e.jsx(l.div,{className:"ml-2",animate:{scale:[1,1.1,1]},transition:{duration:2,repeat:1/0},children:e.jsx(pe,{className:"w-6 h-6 text-amber-400"})})]}),e.jsx("h1",{className:"text-4xl md:text-6xl font-bold bg-gradient-to-r from-pink-400 to-purple-400 bg-clip-text text-transparent mb-4",children:"Captured Images"}),e.jsx("p",{className:"text-pink-100/80 text-lg max-w-2xl mx-auto",children:"Your visual memories and moments captured through Telegram"})]}),e.jsx(l.div,{className:"mb-8 flex justify-center",variants:u,children:e.jsx(D,{className:"px-6 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${s?"bg-green-400":"bg-red-400"}`}),e.jsxs("span",{className:"text-sm text-white",children:["Socket Status: ",s?"Connected":"Disconnected"]})]})})}),r.length===0?e.jsx(l.div,{className:"text-center py-16",variants:u,children:e.jsxs(D,{className:"p-12 max-w-md mx-auto",children:[e.jsx(Oa,{className:"w-16 h-16 text-pink-400/50 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"No images yet"}),e.jsx("p",{className:"text-pink-100/70 mb-6",children:"Send photos to your Telegram bot to see them here"})]})}):e.jsx(l.div,{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",variants:m,children:r.map((x,y)=>e.jsx(l.div,{variants:u,whileHover:{y:-5,scale:1.03},transition:{type:"spring",stiffness:300,damping:15},children:e.jsxs(D,{className:"overflow-hidden group relative h-full flex flex-col",children:[e.jsx(l.button,{onClick:()=>c(x._id,x.mediaLocalUrl||x._id),className:"absolute top-2 right-2 z-10 p-2 bg-red-500/80 text-white rounded-full hover:bg-red-600/90 opacity-0 group-hover:opacity-100 transition-all focus:opacity-100",title:"Delete image",whileHover:{scale:1.1},whileTap:{scale:.9},children:e.jsx(ke,{size:16})}),e.jsx("div",{className:"relative overflow-hidden",children:e.jsxs("a",{href:`${ut}${x.mediaLocalUrl}`,target:"_blank",rel:"noopener noreferrer",className:"block relative group",children:[e.jsx("img",{src:`${ut}${x.mediaLocalUrl}`,alt:`Telegram Photo from ${x.fromUsername||"Unknown"} in ${x.chatTitle||"DM"}`,className:"w-full h-48 object-cover transition-transform duration-300 group-hover:scale-110"}),e.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors duration-300 flex items-center justify-center",children:e.jsx(_e,{className:"w-6 h-6 text-white opacity-0 group-hover:opacity-100 transition-opacity duration-300"})})]})}),e.jsxs("div",{className:"p-4 space-y-2 mt-auto",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-pink-100/80",children:[e.jsx(Be,{className:"w-3 h-3"}),e.jsx("span",{children:x.fromUsername||"Unknown User"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-pink-100/80",children:[e.jsx(lt,{className:"w-3 h-3"}),e.jsx("span",{children:x.chatTitle||"DM"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-pink-100/60",children:[e.jsx(Ie,{className:"w-3 h-3"}),e.jsx("span",{children:new Date(x.receivedAt).toLocaleDateString()})]})]})]})},x._id))})]})]})},Br=({className:t,...s})=>e.jsx("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 24 24",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",className:t,...s,children:e.jsxs("g",{children:[e.jsx("path",{fill:"none",d:"M0 0h24v24H0z"}),e.jsx("path",{d:"M22.162 5.656a8.384 8.384 0 0 1-2.402.658A4.196 4.196 0 0 0 21.6 4c-.82.488-1.719.83-2.656 1.015a4.182 4.182 0 0 0-7.126 3.814 11.874 11.874 0 0 1-8.62-4.37 4.168 4.168 0 0 0-.566 2.103c0 1.45.738 2.731 1.86 3.481a4.168 4.168 0 0 1-1.894-.523v.052a4.185 4.185 0 0 0 3.355 4.101 4.21 4.21 0 0 1-1.89.072A4.185 4.185 0 0 0 7.97 16.65a8.394 8.394 0 0 1-6.191 1.732 11.83 11.83 0 0 0 6.41 1.88c7.693 0 11.9-6.373 11.9-11.9 0-.18-.005-.362-.013-.54a8.496 8.496 0 0 0 2.087-2.165z"})]})}),Or=({className:t,...s})=>e.jsx("svg",{"aria-label":"Verified Account",viewBox:"0 0 24 24",className:t,...s,children:e.jsx("g",{fill:"currentColor",children:e.jsx("path",{d:"M22.5 12.5c0-1.58-.875-2.95-2.148-3.6.154-.435.238-.905.238-1.4 0-2.21-1.71-3.998-3.818-3.998-.47 0-.92.084-1.336.25C14.818 2.415 13.51 1.5 12 1.5s-2.816.917-3.437 2.25c-.415-.165-.866-.25-1.336-.25-2.11 0-3.818 1.79-3.818 4 0 .494.083.964.237 1.4-1.272.65-2.147 2.018-2.147 3.6 0 1.495.782 2.798 1.942 3.486-.02.17-.032.34-.032.514 0 2.21 1.708 4 3.818 4 .47 0 .92-.086 1.335-.25.62 1.334 1.926 2.25 3.437 2.25 1.512 0 2.818-.916 3.437-2.25.415.163.865.248 1.336.248 2.11 0 3.818-1.79 3.818-4 0-.174-.012-.344-.033-.513 1.158-.687 1.943-1.99 1.943-3.484zm-6.616-3.334l-4.334 6.5c-.145.217-.382.334-.625.334-.143 0-.288-.04-.416-.126l-.115-.094-2.415-2.415c-.293-.293-.293-.768 0-1.06s.768-.294 1.06 0l1.77 1.767 3.825-5.74c.23-.345.696-.436 1.04-.207.346.23.44.696.21 1.04z"})})}),_t=(t,s)=>!t||t.length<=s?t:`${t.slice(0,s-3)}...`,it=({className:t,...s})=>e.jsx("div",{className:E("rounded-md bg-primary/10",t),...s}),Ur=({className:t,...s})=>e.jsxs("div",{className:E("flex size-full max-h-max min-w-72 flex-col gap-2 rounded-lg border p-4",t),...s,children:[e.jsxs("div",{className:"flex flex-row gap-2",children:[e.jsx(it,{className:"size-10 shrink-0 rounded-full"}),e.jsx(it,{className:"h-10 w-full"})]}),e.jsx(it,{className:"h-20 w-full"})]}),Vr=({className:t,...s})=>e.jsx("div",{className:E("flex size-full flex-col items-center justify-center gap-2 rounded-lg border p-4",t),...s,children:e.jsx("h3",{children:"Tweet not found"})}),Hr=({tweet:t})=>e.jsxs("div",{className:"flex flex-row justify-between tracking-tight",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("a",{href:t.user.url,target:"_blank",rel:"noreferrer",children:e.jsx("img",{title:`Profile picture of ${t.user.name}`,alt:t.user.screen_name,height:48,width:48,src:t.user.profile_image_url_https,className:"overflow-hidden rounded-full border border-transparent"})}),e.jsxs("div",{children:[e.jsxs("a",{href:t.user.url,target:"_blank",rel:"noreferrer",className:"flex items-center whitespace-nowrap font-semibold",children:[_t(t.user.name,20),t.user.verified||t.user.is_blue_verified&&e.jsx(Or,{className:"ml-1 inline size-4 text-blue-500"})]}),e.jsx("div",{className:"flex items-center space-x-1",children:e.jsxs("a",{href:t.user.url,target:"_blank",rel:"noreferrer",className:"text-sm text-gray-500 transition-all duration-75",children:["@",_t(t.user.screen_name,16)]})})]})]}),e.jsxs("a",{href:t.url,target:"_blank",rel:"noreferrer",children:[e.jsx("span",{className:"sr-only",children:"Link to tweet"}),e.jsx(Br,{className:"size-5 items-start text-[#3BA9EE] transition-all ease-in-out hover:scale-105"})]})]}),Wr=({tweet:t})=>e.jsx("div",{className:"break-words leading-normal tracking-tighter",children:t.entities.map((s,a)=>{switch(s.type){case"url":case"symbol":case"hashtag":case"mention":return e.jsx("a",{href:s.href,target:"_blank",rel:"noopener noreferrer",className:"text-sm font-normal text-gray-500",children:e.jsx("span",{children:s.text})},a);case"text":return e.jsx("span",{className:"text-sm font-normal",dangerouslySetInnerHTML:{__html:s.text}},a)}})}),Gr=({tweet:t})=>{var s,a,o;return!t.video&&!t.photos?null:e.jsxs("div",{className:"flex flex-1 items-center justify-center",children:[t.video&&e.jsxs("video",{poster:t.video.poster,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"rounded-xl border shadow-sm",children:[e.jsx("source",{src:t.video.variants[0].src,type:"video/mp4"}),"Your browser does not support the video tag."]}),t.photos&&e.jsxs("div",{className:"relative flex transform-gpu snap-x snap-mandatory gap-4 overflow-x-auto",children:[e.jsx("div",{className:"shrink-0 snap-center sm:w-2"}),t.photos.map(i=>e.jsx("img",{src:i.url,title:"Photo by "+t.user.name,alt:t.text,className:"h-64 w-5/6 shrink-0 snap-center snap-always rounded-xl border object-cover shadow-sm"},i.url)),e.jsx("div",{className:"shrink-0 snap-center sm:w-2"})]}),!t.video&&!t.photos&&((o=(a=(s=t==null?void 0:t.card)==null?void 0:s.binding_values)==null?void 0:a.thumbnail_image_large)==null?void 0:o.image_value.url)&&e.jsx("img",{src:t.card.binding_values.thumbnail_image_large.image_value.url,className:"h-64 rounded-xl border object-cover shadow-sm",alt:t.text})]})},Yr=({tweet:t,components:s,className:a,summaryText:o,onSpeakSummary:i,playingTweetId:r,audioErrorTweetId:m,tweetId:u,...c})=>{const x=ta(t);return e.jsxs("div",{className:E("relative flex size-full max-w-lg flex-col gap-2 overflow-hidden rounded-lg border p-4 backdrop-blur-md",a),...c,children:[e.jsx(Hr,{tweet:x}),e.jsx(Wr,{tweet:x}),o&&e.jsxs("div",{className:"mt-2 pt-2 border-t",children:[e.jsxs("h4",{className:"text-sm font-semibold mb-1 flex items-center",children:[e.jsx(he,{className:"w-4 h-4 mr-1 flex-shrink-0"})," Summary"]}),e.jsx("p",{className:"text-xs text-muted-foreground whitespace-pre-wrap",children:o}),i&&u&&e.jsxs(e.Fragment,{children:[e.jsxs(R,{variant:"ghost",size:"sm",onClick:y=>{y.stopPropagation(),i(u,o||"")},disabled:r===u&&!m,className:"mt-2 text-xs",title:r===u&&!m?"Playing Summary...":m===u?"Retry Reading Summary":"Read Summary Aloud",children:[e.jsx(us,{className:`w-4 h-4 mr-1 ${r===u&&!m?"animate-pulse":""}`}),r===u&&!m?"Playing...":m===u?"Retry Read":"Read Aloud"]}),m===u&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:"Failed to play audio. Please try again."})]})]}),e.jsx(Gr,{tweet:x})]})},qr=({id:t,apiUrl:s,fallback:a=e.jsx(Ur,{}),components:o,fetchOptions:i,onError:r,className:m,onDelete:u,onSummarize:c,isSummarizing:x,summaryStatus:y,summaryText:d,onSpeakSummary:f,playingTweetId:p,audioErrorTweetId:v,...k})=>{const{data:S,error:b}=ea(t,s,i);return b&&(console.error(b),r==null||r(b)),e.jsxs("div",{className:E("relative group",m),...k,children:[S&&e.jsx(Yr,{tweet:S,components:o,summaryText:d,onSpeakSummary:f,playingTweetId:p,audioErrorTweetId:v,tweetId:t}),!S&&!b&&a,b&&e.jsx(Vr,{}),S&&(u||c)&&e.jsxs("div",{className:"absolute bottom-2 right-2 z-10 flex space-x-2 opacity-100 sm:opacity-0 sm:group-hover:opacity-100 sm:focus-within:opacity-100 transition-opacity",children:[c&&e.jsx(R,{variant:"outline",size:"sm",onClick:T=>{T.stopPropagation(),t&&c(t)},disabled:x||y==="summarized",title:y==="summarized"?"Already Summarized":y==="pending_summary"?"Retry Summarize?":"Summarize Content",className:"text-xs",children:x?e.jsxs(e.Fragment,{children:[e.jsx(Ae,{className:"w-4 h-4 mr-1 animate-pulse"})," Summarizing..."]}):y==="summarized"?e.jsxs(e.Fragment,{children:[e.jsx(he,{className:"w-4 h-4 mr-1"})," Summarized"]}):y==="pending_summary"?e.jsxs(e.Fragment,{children:[e.jsx(he,{className:"w-4 h-4 mr-1"})," Summarize (Pending)"]}):e.jsxs(e.Fragment,{children:[e.jsx(he,{className:"w-4 h-4 mr-1"})," Summarize"]})}),u&&e.jsx(R,{variant:"destructive",size:"icon",onClick:T=>{T.stopPropagation(),u()},title:"Delete Tweet Bookmark",children:e.jsx(ke,{className:"w-4 h-4"})})]})]})},Jr=({bookmark:t,onDelete:s})=>{const a=new Date(t.createdAt).toLocaleString(void 0,{year:"numeric",month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit"});return console.log(`LinkedIn Card - Bookmark ${t._id} createdAt: ${t.createdAt}, Formatted: ${a}`),e.jsxs(Q,{className:"flex flex-col overflow-hidden shadow-lg hover:shadow-xl transition-shadow duration-300 h-full",children:[e.jsxs(Oe,{className:"flex-grow p-4",children:[e.jsxs(Ue,{className:"text-base font-semibold leading-tight mb-1 flex items-center",children:[e.jsx(ds,{className:"w-5 h-5 mr-2 text-blue-700"}),e.jsx("span",{className:"line-clamp-2",title:t.fetchedTitle||t.originalUrl,children:t.fetchedTitle||"LinkedIn Post"})]}),t.fetchedDescription&&e.jsx(Nt,{className:"text-sm text-muted-foreground line-clamp-3",children:t.fetchedDescription})]}),e.jsxs(Ve,{className:"p-4 pt-2 border-t mt-auto flex flex-col items-stretch gap-2",children:[e.jsxs("div",{className:"flex justify-between items-center w-full",children:[e.jsxs(R,{variant:"outline",size:"sm",onClick:()=>window.open(t.originalUrl,"_blank"),title:"View on LinkedIn",className:"text-xs",children:[e.jsx(_e,{className:"w-4 h-4 mr-1"})," View Post"]}),e.jsx(R,{variant:"destructive",size:"icon",onClick:()=>s(t._id),title:"Delete Bookmark",children:e.jsx(ke,{className:"w-4 h-4"})})]}),e.jsxs("p",{className:"text-xs text-muted-foreground text-right w-full",children:["Saved: ",a]})]})]})},Ne=oa,we=la,fe=n.forwardRef(({className:t,children:s,...a},o)=>e.jsxs(Yt,{ref:o,className:E("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...a,children:[s,e.jsx(sa,{asChild:!0,children:e.jsx(fs,{className:"h-4 w-4 opacity-50"})})]}));fe.displayName=Yt.displayName;const Ls=n.forwardRef(({className:t,...s},a)=>e.jsx(qt,{ref:a,className:E("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(Ua,{className:"h-4 w-4"})}));Ls.displayName=qt.displayName;const Ds=n.forwardRef(({className:t,...s},a)=>e.jsx(Jt,{ref:a,className:E("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(fs,{className:"h-4 w-4"})}));Ds.displayName=Jt.displayName;const be=n.forwardRef(({className:t,children:s,position:a="popper",...o},i)=>e.jsx(aa,{children:e.jsxs(Kt,{ref:i,className:E("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:a,...o,children:[e.jsx(Ls,{}),e.jsx(ra,{className:E("p-1",a==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),e.jsx(Ds,{})]})}));be.displayName=Kt.displayName;const Kr=n.forwardRef(({className:t,...s},a)=>e.jsx(Xt,{ref:a,className:E("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...s}));Kr.displayName=Xt.displayName;const V=n.forwardRef(({className:t,children:s,...a},o)=>e.jsxs(Zt,{ref:o,className:E("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...a,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(ia,{children:e.jsx(os,{className:"h-4 w-4"})})}),e.jsx(na,{children:s})]}));V.displayName=Zt.displayName;const Xr=n.forwardRef(({className:t,...s},a)=>e.jsx(Qt,{ref:a,className:E("-mx-1 my-1 h-px bg-muted",t),...s}));Xr.displayName=Qt.displayName;const Zr=()=>{const[t,s]=n.useState([]),[a,o]=n.useState(!0),[i,r]=n.useState(null),[m,u]=n.useState("all"),[c,x]=n.useState(""),[y,d]=n.useState("desc"),[f,p]=n.useState(1),[v,k]=n.useState(1),[S,b]=n.useState(0),T=10,{ref:L,isInView:j}=ge(),{ref:A,isInView:Z}=ge(),{ref:H,isInView:ne}=ge(),[P,F]=n.useState(null),[K,w]=n.useState(null),[C,I]=n.useState(null),{latestDigest:M,latestDigestSources:W,isBatchSummarizing:re,summarizeLatestBookmarks:me}=ws(),{toast:N}=Qe(),q=B(h=>h.token),[X,O]=n.useState(null);console.log("[BookmarksPage] Component rendered or re-rendered");const G=n.useCallback(async(h=1)=>{if(q){console.log(`[BookmarksPage] Fetching bookmarks for page: ${h}...`),o(!0);try{const $=await ur(h,T);console.log("[BookmarksPage] Fetched data:",JSON.stringify($.data,null,2)),s($.data),p($.currentPage),k($.totalPages),b($.totalBookmarks),r(null)}catch($){r("Failed to load bookmarks. Please ensure the backend is running and refresh."),console.error("Error fetching bookmarks:",$),N({title:"Error Fetching Bookmarks",description:"Could not fetch bookmarks. The server might be down.",variant:"destructive"})}finally{o(!1)}}},[q,N]);n.useEffect(()=>{G(f)},[G,f]);const xe=n.useMemo(()=>{if(!Array.isArray(t))return console.warn("[BookmarksPage] bookmarks is not an array in useMemo. Returning empty array.",t),[];const h=new Date;return t.filter(U=>{var Ee,Ct,Tt,Et;const te=new Date(U.createdAt),ie=m==="all"?!0:m==="week"?te>=new Date(h.getFullYear(),h.getMonth(),h.getDate()-7):m==="month"?te>=new Date(h.getFullYear(),h.getMonth()-1,h.getDate()):!0,ve=c===""?!0:((Ee=U.title)==null?void 0:Ee.toLowerCase().includes(c.toLowerCase()))||((Ct=U.summary)==null?void 0:Ct.toLowerCase().includes(c.toLowerCase()))||U.originalUrl.toLowerCase().includes(c.toLowerCase())||U.sourcePlatform==="X"&&((Tt=U.fetchedTitle)==null?void 0:Tt.toLowerCase().includes(c.toLowerCase()))||U.sourcePlatform==="LinkedIn"&&((Et=U.fetchedTitle)==null?void 0:Et.toLowerCase().includes(c.toLowerCase()));return ie&&ve}).sort((U,te)=>{const ie=new Date(U.createdAt).getTime(),ve=new Date(te.createdAt).getTime();return y==="asc"?ie-ve:ve-ie})},[t,m,c,y]),ze=h=>{if(!h||typeof h!="string"||h.trim()==="")return!1;try{return!!new URL(h).hostname}catch{return!1}},Te=h=>{if(!(!h||typeof h!="string")&&(h.includes("twitter.com")||h.includes("x.com"))){const $=h.match(/status\/(\d+)/);return $&&$[1]?$[1]:void 0}},g=async h=>{try{await xr(h),s($=>$.filter(U=>U._id!==h)),N({title:"Bookmark Deleted",description:"The bookmark has been successfully removed.",variant:"default"})}catch($){console.error(`Error deleting bookmark ${h}:`,$),N({title:"Deletion Failed",description:"Could not delete the bookmark. Please try again.",variant:"destructive"})}},_=async h=>{F(h);try{const $=await hr(h);s(U=>U.map(te=>te._id===h?{...$,status:"summarized"}:te)),N({title:"Summary Generated",description:"Bookmark has been successfully summarized.",variant:"default"})}catch($){console.error(`Error summarizing bookmark ${h}:`,$);const U=($==null?void 0:$.message)||"Failed to summarize bookmark.";s(te=>te.map(ie=>ie._id===h?{...ie,status:"error",summary:`Error: ${U}`}:ie)),N({title:"Summarization Error",description:U,variant:"destructive"})}finally{F(null)}},oe=()=>{console.log("[BookmarksPage] handleSummarizeLatestClick called, invoking context action."),me(t,s)},je=async(h,$)=>{if(console.log(`[handleSpeakSummary] Called for bookmarkId: ${h}`),console.log(`[handleSpeakSummary] Initial summaryText: '${$}'`),!$){console.log("[handleSpeakSummary] Condition: !summaryText is TRUE. Exiting."),N({title:"No Summary",description:"No summary available to play.",variant:"destructive"});return}if(console.log("[handleSpeakSummary] Condition: !summaryText is FALSE. Proceeding."),X){if(console.log("[handleSpeakSummary] Condition: currentAudio exists."),X.pause(),URL.revokeObjectURL(X.src),O(null),K===h){console.log("[handleSpeakSummary] Condition: playingBookmarkId === bookmarkId is TRUE. Toggling off. Exiting."),w(null);return}console.log("[handleSpeakSummary] Condition: playingBookmarkId === bookmarkId is FALSE. Proceeding.")}else console.log("[handleSpeakSummary] Condition: currentAudio does NOT exist. Proceeding.");const U={}.VITE_ELEVENLABS_API_KEY;if(console.log(`[handleSpeakSummary] Retrieved VITE_ELEVENLABS_API_KEY: '${U?"********":"MISSING!"}'`),!U){console.log("[handleSpeakSummary] Condition: !ELEVENLABS_API_KEY is TRUE. Exiting."),N({title:"API Key Missing",description:"ElevenLabs API key is not configured.",variant:"destructive"}),I(h);return}console.log("[handleSpeakSummary] Condition: !ELEVENLABS_API_KEY is FALSE. API Key found. Proceeding to API call.");const te="21m00Tcm4TlvDq8ikWAM";w(h),I(null);try{const ie=await pr($,te,U),ve=URL.createObjectURL(ie),Ee=new Audio(ve);O(Ee),Ee.play(),Ee.onended=()=>{w(null),URL.revokeObjectURL(ve),O(null)},Ee.onerror=()=>{console.error("Error playing audio for bookmark:",h),w(null),I(h),URL.revokeObjectURL(ve),O(null),N({title:"Audio Playback Error",description:"Could not play the summary audio.",variant:"destructive"})}}catch(ie){console.error(`Error generating audio for bookmark ${h}:`,ie),w(null),I(h),N({title:"Text-to-Speech Error",description:ie.message||"Failed to generate audio for the summary.",variant:"destructive"})}},ye={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},et={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",stiffness:100}}},He=h=>{switch(h){case"X":return e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",fill:"currentColor",viewBox:"0 0 16 16",className:"mr-2 shrink-0",children:e.jsx("path",{d:"M12.6.75h2.454l-5.36 6.142L16 15.25h-4.937l-3.867-5.07-4.425 5.07H.316l5.733-6.57L0 .75h5.063l3.495 4.633L12.602.75Zm-.86 13.028h1.36L4.323 2.145H2.865l8.875 11.633Z"})});case"LinkedIn":return e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",fill:"currentColor",viewBox:"0 0 16 16",className:"mr-2 shrink-0",children:e.jsx("path",{d:"M0 1.146C0 .513.526 0 1.175 0h13.65C15.474 0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487 0 14.854V1.146zm4.943 12.248V6.169H2.542v7.225h2.401zm-1.2-8.212c.837 0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248-.822 0-1.359.54-1.359 1.248 0 .694.521 1.248 1.327 1.248h.016zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869 0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274 0-1.845.7-2.165 1.193v.025h-.016a5.54 5.54 0 0 1 .016-.025V6.169h-2.4c.03.678 0 7.225 0 7.225h2.4z"})});default:return e.jsx(Ha,{className:"w-4 h-4 mr-2 shrink-0"})}};return a&&t.length===0?e.jsx("div",{className:"p-4 md:p-8 min-h-screen bg-gradient-to-br from-background via-background to-muted/20 relative overflow-hidden",children:e.jsxs("div",{className:"container mx-auto relative z-10",children:[e.jsx(l.h1,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-5xl font-bold mb-12 text-center bg-clip-text text-transparent bg-gradient-to-r from-primary via-accent to-primary",children:"My Bookmarks"}),e.jsx(xt,{items:3})]})}):i?e.jsx("div",{className:"p-4 md:p-8 min-h-screen bg-gradient-to-br from-background via-destructive/5 to-background text-foreground flex flex-col items-center justify-center",children:e.jsxs(Q,{className:"w-full max-w-lg text-center border-destructive/20 bg-background/80 backdrop-blur-sm",children:[e.jsx(Oe,{children:e.jsxs(Ue,{className:"text-3xl text-destructive flex items-center justify-center",children:[e.jsx(de,{className:"w-10 h-10 mr-3"})," Error Loading Bookmarks"]})}),e.jsxs(wt,{children:[e.jsx("p",{className:"text-lg mb-4",children:i}),e.jsxs(R,{onClick:()=>G(1),className:"hover:scale-105 transition-transform",children:[e.jsx(Ae,{className:"mr-2 h-4 w-4"})," Try Again"]})]})]})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-muted/20 relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e.jsx(l.div,{className:"absolute -top-40 -right-40 w-80 h-80 bg-gradient-to-br from-primary/10 to-accent/10 rounded-full blur-3xl",animate:{scale:[1,1.2,1],rotate:[0,180,360]},transition:{duration:20,repeat:1/0,ease:"linear"}}),e.jsx(l.div,{className:"absolute -bottom-40 -left-40 w-96 h-96 bg-gradient-to-tr from-secondary/10 to-primary/10 rounded-full blur-3xl",animate:{scale:[1.2,1,1.2],rotate:[360,180,0]},transition:{duration:25,repeat:1/0,ease:"linear"}})]}),e.jsxs("div",{className:"relative z-10 container mx-auto p-4 md:p-8 space-y-8",children:[e.jsxs(l.div,{ref:L,initial:{opacity:0,y:30},animate:j?{opacity:1,y:0}:{opacity:0,y:30},transition:{duration:.6},className:"flex flex-col md:flex-row justify-between items-center mb-4 md:mb-8 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-primary/20 to-accent/20 rounded-full",children:e.jsx(Dt,{className:"w-8 h-8 text-primary"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-primary via-accent to-primary",children:"Bookmarks"}),e.jsx("p",{className:"text-muted-foreground text-lg",children:"Your saved articles, links, and resources."})]})]}),e.jsx(R,{onClick:oe,size:"lg",disabled:re,className:"self-center md:self-auto hover:scale-105 transition-all duration-200 bg-gradient-to-r from-primary to-accent hover:from-primary/90 hover:to-accent/90",children:re?e.jsxs(e.Fragment,{children:[e.jsx(Re,{className:"w-5 h-5 mr-2 animate-spin"}),"Digesting All New..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Le,{className:"w-5 h-5 mr-2"}),"Digest New Bookmarks"]})})]}),e.jsx(l.div,{ref:A,initial:{opacity:0,y:20},animate:Z?{opacity:1,y:0}:{opacity:0,y:20},transition:{duration:.5,delay:.1},children:e.jsx(Q,{className:"p-4 md:p-6 bg-background/80 backdrop-blur-sm border-border/50",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[e.jsxs("div",{className:"md:col-span-1",children:[e.jsx(J,{htmlFor:"bookmarks-search",className:"text-sm font-medium text-muted-foreground mb-1 block",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ze,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground z-10"}),e.jsx(ce,{id:"bookmarks-search",type:"text",placeholder:"Search title, URL, summary...",value:c,onChange:h=>x(h.target.value),className:"w-full pl-10 pr-4 py-2 text-sm bg-background/50 hover:bg-background/70 focus:bg-background/70 border-border/50 focus:ring-primary focus:border-primary transition-all duration-200"})]})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"bookmarks-filter",className:"text-sm font-medium text-muted-foreground mb-1 block",children:"Date Filter"}),e.jsxs(Ne,{value:m,onValueChange:u,children:[e.jsx(fe,{id:"bookmarks-filter",className:"w-full bg-background/50 hover:bg-background/70 focus:bg-background/70 border-border/50 focus:ring-primary focus:border-primary transition-all duration-200",children:e.jsx(we,{placeholder:"Filter by date..."})}),e.jsxs(be,{className:"bg-background border-border shadow-xl",children:[e.jsx(V,{value:"all",children:"All Time"}),e.jsx(V,{value:"week",children:"Past Week"}),e.jsx(V,{value:"month",children:"Past Month"})]})]})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"bookmarks-sort",className:"text-sm font-medium text-muted-foreground mb-1 block",children:"Sort By Date"}),e.jsxs(Ne,{value:y,onValueChange:d,children:[e.jsx(fe,{id:"bookmarks-sort",className:"w-full bg-background/50 hover:bg-background/70 focus:bg-background/70 border-border/50 focus:ring-primary focus:border-primary transition-all duration-200",children:e.jsx(we,{placeholder:"Sort by..."})}),e.jsxs(be,{className:"bg-background border-border shadow-xl",children:[e.jsx(V,{value:"desc",children:"Newest First"}),e.jsx(V,{value:"asc",children:"Oldest First"})]})]})]})]})})}),e.jsxs(l.div,{ref:H,initial:{opacity:0,y:20},animate:ne?{opacity:1,y:0}:{opacity:0,y:20},transition:{duration:.5,delay:.2},children:[a&&e.jsx(xt,{items:T}),i&&e.jsxs(Pe,{variant:"destructive",className:"border-destructive/20 bg-destructive/5 my-6",children:[e.jsx(de,{className:"h-4 w-4"}),e.jsx(Se,{children:"Error Loading Bookmarks"}),e.jsx(Ce,{children:i})]}),!a&&!i&&xe.length===0&&e.jsxs(Q,{className:"p-8 my-6 text-center bg-background/80 backdrop-blur-sm border-border/50",children:[e.jsx(Dt,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4 opacity-50"}),e.jsx("h3",{className:"text-xl font-semibold text-foreground mb-2",children:c||m!=="all"?"No Bookmarks Match Your Criteria":"No Bookmarks Yet"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:c||m!=="all"?"Try adjusting your search or filters.":"Start adding bookmarks to see them here."})]}),!a&&!i&&xe.length>0&&e.jsx(l.div,{className:"space-y-4 md:space-y-6",variants:ye,initial:"hidden",animate:"visible",children:xe.map((h,$)=>{const U=ze(h.originalUrl);let te=h.originalUrl;return U||(h.originalUrl&&h.originalUrl.trim()!==""?te=`Invalid URL: ${h.originalUrl}`:te="Missing or empty URL"),e.jsx(l.div,{variants:et,whileHover:{scale:1.02,transition:{duration:.2}},className:"group",children:e.jsxs(Q,{className:"p-4 md:p-6 bg-background/80 backdrop-blur-sm border-border/50 hover:border-primary/30 transition-all duration-300 hover:shadow-lg hover:shadow-primary/10",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-grow min-w-0",children:[U?e.jsx("a",{href:h.originalUrl,target:"_blank",rel:"noopener noreferrer",className:"hover:underline group-hover:text-primary transition-colors duration-200",children:e.jsx("h3",{className:"text-lg md:text-xl font-semibold text-foreground truncate",title:h.title||h.fetchedTitle||h.originalUrl,children:h.title||h.fetchedTitle||h.originalUrl})}):e.jsx("h3",{className:"text-lg md:text-xl font-semibold text-foreground truncate",title:h.title||h.fetchedTitle||te,children:h.title||h.fetchedTitle||te}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",title:te,children:te}),h.sourcePlatform==="X"&&U&&(()=>{const ie=Te(h.originalUrl);return ie?e.jsx("div",{className:"mt-2 mr-4 md:mr-0 max-w-full overflow-hidden",children:e.jsx(qr,{id:ie})}):null})(),h.sourcePlatform==="LinkedIn"&&e.jsx("div",{className:"mt-2 mr-4 md:mr-0 max-w-full overflow-hidden",children:e.jsx(Jr,{bookmark:{...h,originalUrl:U?h.originalUrl:"#"},onDelete:g})}),h.summary&&h.status==="summarized"&&e.jsxs("details",{className:"mt-3 text-sm text-muted-foreground/90 leading-relaxed",children:[e.jsx("summary",{className:"cursor-pointer font-medium text-primary/80 hover:text-primary select-none transition-colors duration-200",children:"View Summary"}),e.jsx("p",{className:"pt-2 whitespace-pre-wrap",children:String(h.summary)})]}),h.status==="pending"&&e.jsx("p",{className:"text-xs text-amber-500 mt-1",children:"Summary pending..."}),h.status==="failed"&&e.jsx("p",{className:"text-xs text-destructive mt-1",children:"Summary failed."}),h.status==="processing"&&e.jsxs("div",{className:"flex items-center text-xs text-sky-500 mt-1",children:[e.jsx(Re,{className:"w-3 h-3 mr-1 animate-spin"}),e.jsx("span",{children:"Processing summary..."})]})]}),e.jsxs("div",{className:"flex flex-col space-y-2 ml-2 sm:ml-4 shrink-0",children:[e.jsx(R,{size:"icon",variant:"ghost",onClick:()=>_(h._id),disabled:P===h._id||h.status==="processing",className:"hover:bg-primary/10 hover:text-primary transition-colors duration-200",title:"Generate Summary",children:P===h._id?e.jsx(Re,{className:"w-4 h-4 animate-spin"}):h.status==="summarized"?e.jsx(yt,{className:"w-4 h-4 text-green-500"}):h.status==="failed"?e.jsx(xs,{className:"w-4 h-4 text-destructive"}):e.jsx(Le,{className:"w-4 h-4"})}),e.jsx(R,{size:"icon",variant:"ghost",onClick:()=>je(h._id,h.summary),disabled:!h.summary||h.status!=="summarized",className:`hover:bg-accent/10 hover:text-accent transition-colors duration-200 ${C===h._id?"text-destructive":""}`,title:C===h._id?"Audio Error":K===h._id?"Stop Speaking":"Speak Summary",children:K===h._id?e.jsx(Va,{className:"w-4 h-4"}):C===h._id?e.jsx(de,{className:"w-4 h-4"}):e.jsx(ct,{className:"w-4 h-4"})}),e.jsx(R,{size:"icon",variant:"ghost",onClick:()=>g(h._id),className:"hover:bg-destructive/10 hover:text-destructive transition-colors duration-200",title:"Delete Bookmark",children:e.jsx(ke,{className:"w-4 h-4"})})]})]}),e.jsxs(Ve,{className:"pt-4 mt-4 border-t border-border/20 flex justify-between items-center text-xs text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center",children:[He(h.sourcePlatform),e.jsx("span",{children:h.sourcePlatform||"Other"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(ms,{className:"w-3 h-3 mr-1.5"}),e.jsx("span",{children:new Date(h.createdAt).toLocaleDateString()})]})]})]})},h._id)})})]}),!a&&!i&&v>1&&e.jsxs("div",{className:"flex justify-center items-center space-x-2 mt-8",children:[e.jsx(R,{onClick:()=>G(f-1),disabled:f<=1,variant:"outline",size:"sm",children:"Previous"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Page ",f," of ",v]}),e.jsx(R,{onClick:()=>G(f+1),disabled:f>=v,variant:"outline",size:"sm",children:"Next"})]})]})]})},Qr=async()=>{try{return(await Y.get("/videos")).data}catch(t){throw console.error("Error fetching videos:",t),t}},ei=async(t,s)=>{try{return(await Y.put(`/videos/${t}/status`,{status:s})).data}catch(a){throw console.error(`Error updating video status for ${t}:`,a),a}},ti=async t=>{try{return(await Y.delete(`/videos/${t}`)).data}catch(s){throw console.error(`Error deleting video ${t}:`,s),s}},si=()=>{const[t,s]=n.useState([]),[a,o]=n.useState(!0),[i,r]=n.useState(null),[m,u]=n.useState(null),{toast:c}=Qe(),x=async()=>{try{o(!0);const b=await Qr();s(b),r(null)}catch(b){r("Failed to load videos. Please ensure the backend is running and refresh."),console.error("Error fetching videos:",b)}finally{o(!1)}};n.useEffect(()=>{x()},[]);const y=async(b,T)=>{try{const L=await ei(b,T);s(j=>j.map(A=>A._id===b?{...A,watchedStatus:L.watchedStatus,updatedAt:L.updatedAt}:A))}catch(L){console.error("Error updating video status:",L),r(`Failed to update status for video ${b}.`)}},d=async b=>{try{await ti(b),s(t.filter(T=>T._id!==b)),c({title:"Success",description:"Video deleted successfully."})}catch(T){console.error(`Error deleting video ${b}:`,T),c({title:"Error",description:"Failed to delete video.",variant:"destructive"})}},f=t.reduce((b,T)=>(b[T.watchedStatus]||(b[T.watchedStatus]=[]),b[T.watchedStatus].push(T),b),{}),p=[{title:"Watch Next",status:"unwatched",icon:e.jsx(ct,{className:"mr-2 h-6 w-6 text-blue-500"})},{title:"Currently Watching",status:"watching",icon:e.jsx(bs,{className:"mr-2 h-6 w-6 text-yellow-500"})},{title:"Watched",status:"watched",icon:e.jsx(yt,{className:"mr-2 h-6 w-6 text-green-500"})}],v=[{value:"unwatched",label:"Watch Next"},{value:"watching",label:"Watching"},{value:"watched",label:"Watched"}];if(a)return e.jsxs("div",{className:"flex justify-center items-center h-screen bg-gradient-to-br from-slate-900 via-purple-950 to-slate-900 text-white",children:[e.jsx(ae,{items:20}),e.jsx(l.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"text-lg z-10",children:"Loading your video library..."})]});if(i)return e.jsxs("div",{className:"flex flex-col justify-center items-center h-screen bg-gradient-to-br from-red-900 via-red-950 to-slate-900 text-white p-4",children:[e.jsx(ae,{items:15,type:"error"}),e.jsxs(D,{className:"max-w-2xl mx-auto mt-8 text-center z-10",children:[e.jsx(Oe,{children:e.jsxs(Ue,{className:"text-2xl text-red-400 flex items-center justify-center",children:[e.jsx(Wa,{className:"h-6 w-6 mr-2"})," Error Loading Videos"]})}),e.jsx(wt,{children:e.jsx("p",{children:i})}),e.jsx(Ve,{children:e.jsx(z,{onClick:x,variant:"primary",className:"mx-auto",children:"Try Again"})})]})]});const k={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.07}}},S={hidden:{opacity:0,y:20,scale:.95},visible:{opacity:1,y:0,scale:1,transition:{type:"spring",stiffness:100,damping:12}}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-950 to-slate-900 text-white p-4 md:p-8 relative overflow-hidden",children:[e.jsx(ae,{items:30}),e.jsxs(l.div,{className:"container mx-auto relative z-10",initial:"hidden",animate:"visible",variants:k,children:[e.jsxs(l.h1,{className:"text-4xl md:text-5xl font-bold mb-10 md:mb-12 text-center bg-clip-text text-transparent bg-gradient-to-r from-purple-400 via-pink-500 to-red-400 py-2",variants:S,children:[e.jsx(Ga,{className:"inline-block h-10 w-10 mr-3 mb-1"})," My Video Library"]}),m&&e.jsx(l.div,{className:"fixed inset-0 bg-black bg-opacity-80 backdrop-blur-sm flex items-center justify-center z-50 p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:e.jsxs(l.div,{className:"bg-slate-900/80 p-3 md:p-4 rounded-lg shadow-2xl relative w-full max-w-3xl aspect-video border border-purple-500/30",initial:{scale:.7,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:200,damping:25},children:[e.jsx(z,{variant:"ghost",size:"icon",onClick:()=>u(null),className:"absolute -top-4 -right-4 bg-red-600 hover:bg-red-700 text-white rounded-full h-9 w-9 z-10 shadow-lg",title:"Close player",children:"X"}),e.jsx("iframe",{width:"100%",height:"100%",src:`https://www.youtube.com/embed/${m}?autoplay=1`,title:"YouTube video player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})]})}),t.length===0?e.jsx(l.div,{variants:S,children:e.jsxs(D,{className:"max-w-lg mx-auto text-center p-8 mt-10",children:[e.jsx(Ya,{className:"h-12 w-12 mx-auto mb-4 text-purple-400/70"}),e.jsx(Se,{className:"text-xl font-semibold text-white mb-2",children:"No Videos Yet!"}),e.jsx(Ce,{className:"text-purple-200/80",children:"Your video library is empty. Send YouTube links to your Synapse Telegram bot, and they'll appear here, ready to be organized and watched."})]})}):p.map(b=>{var T,L;return e.jsxs(l.section,{className:"mb-12",variants:S,children:[e.jsxs("div",{className:"flex items-center mb-6",children:[b.icon,e.jsxs(l.h2,{className:"text-2xl font-semibold",variants:S,children:[b.title," (",((T=f[b.status])==null?void 0:T.length)||0,")"]})]}),(((L=f[b.status])==null?void 0:L.length)||0)===0?e.jsx(l.p,{className:"text-muted-foreground ml-10",variants:S,children:"No videos in this section."}):e.jsx(l.div,{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",variants:k,children:f[b.status].sort((j,A)=>new Date(A.createdAt).getTime()-new Date(j.createdAt).getTime()).map(j=>e.jsx(l.div,{variants:S,whileHover:{y:-5,scale:1.03},transition:{type:"spring",stiffness:200,damping:15},children:e.jsxs(D,{className:"flex flex-col overflow-hidden h-full hover:shadow-purple-500/40",children:[e.jsxs("div",{onClick:()=>u(j.videoId),className:"block cursor-pointer relative group aspect-[16/9]",children:[j.thumbnailUrl?e.jsx("img",{src:j.thumbnailUrl,alt:`Thumbnail for ${j.title}`,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105"}):e.jsx("div",{className:"w-full h-full bg-slate-800 flex items-center justify-center text-slate-500",children:"No Thumbnail"}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-60 flex items-center justify-center transition-all duration-300",children:e.jsx(ct,{className:"h-12 w-12 md:h-16 md:w-16 text-white opacity-0 group-hover:opacity-90 transform scale-75 group-hover:scale-100 transition-all duration-300"})})]}),e.jsxs(Oe,{className:"flex-grow p-3 md:p-4",children:[e.jsx(Ue,{className:"text-sm md:text-base font-semibold leading-tight mb-1 line-clamp-2 text-gray-100 hover:text-pink-300 transition-colors",title:j.title,children:j.title}),j.channelTitle&&e.jsx(Nt,{className:"text-xs text-purple-400 line-clamp-1",children:j.channelTitle})]}),e.jsxs(Ve,{className:"p-3 md:p-4 pt-2 border-t border-purple-800/50 flex items-center justify-between",children:[e.jsxs(Ne,{value:j.watchedStatus,onValueChange:A=>y(j._id,A),children:[e.jsx(fe,{className:"w-full text-xs h-9 bg-slate-700/50 border-purple-600/70 hover:border-purple-500",children:e.jsx(we,{placeholder:"Change status"})}),e.jsx(be,{className:"bg-slate-800 border-purple-600 text-white",children:v.map(A=>e.jsx(V,{value:A.value,className:"text-xs hover:bg-purple-700/50 focus:bg-purple-700/60",children:A.label},A.value))})]}),e.jsx(z,{variant:"ghost",size:"icon",onClick:()=>d(j._id),className:"ml-2 text-red-500 hover:bg-red-500/10 hover:text-red-400",title:"Delete Video",children:e.jsx(ke,{className:"w-4 h-4"})})]})]})},j._id))})]},b.status)})]})]})},ai=()=>e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-violet-900 via-blue-900 to-purple-900 relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsx(l.div,{className:"absolute w-96 h-96 bg-gradient-to-r from-violet-400/30 to-purple-400/30 rounded-full blur-3xl",style:{top:"10%",left:"10%"},animate:{x:[0,100,0],y:[0,-50,0],scale:[1,1.1,1]},transition:{duration:20,repeat:1/0,ease:"easeInOut"}}),e.jsx(l.div,{className:"absolute w-80 h-80 bg-gradient-to-r from-blue-400/30 to-cyan-400/30 rounded-full blur-3xl",style:{top:"60%",right:"10%"},animate:{x:[0,-80,0],y:[0,80,0],scale:[1,.9,1]},transition:{duration:25,repeat:1/0,ease:"easeInOut"}}),e.jsx(l.div,{className:"absolute w-64 h-64 bg-gradient-to-r from-pink-400/20 to-rose-400/20 rounded-full blur-3xl",style:{bottom:"20%",left:"30%"},animate:{x:[0,60,0],y:[0,-60,0],scale:[1,1.2,1]},transition:{duration:18,repeat:1/0,ease:"easeInOut"}})]}),e.jsx(ae,{items:25}),e.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center min-h-screen px-4",children:[e.jsxs(l.div,{className:"text-center mb-16",initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.8},children:[e.jsx(l.div,{className:"flex items-center justify-center mb-6",initial:{scale:0},animate:{scale:1},transition:{duration:.6,delay:.2},children:e.jsxs("div",{className:"relative",children:[e.jsx(Le,{className:"w-16 h-16 text-violet-300"}),e.jsx(l.div,{className:"absolute -top-1 -right-1",animate:{rotate:360},transition:{duration:3,repeat:1/0,ease:"linear"},children:e.jsx(pe,{className:"w-6 h-6 text-amber-300"})})]})}),e.jsx(l.h1,{className:"text-6xl md:text-8xl font-bold bg-gradient-to-r from-violet-200 via-blue-200 to-purple-200 bg-clip-text text-transparent mb-6",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.3},children:"SYNAPSE"}),e.jsx(l.p,{className:"text-xl md:text-2xl text-blue-100/80 mb-4 max-w-3xl leading-relaxed",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.4},children:"Your Revolutionary AI-Powered Second Brain"}),e.jsx(l.p,{className:"text-lg md:text-xl text-blue-200/60 mb-12 max-w-2xl",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.5},children:"Capture, organize, and amplify your thoughts with the power of artificial intelligence"}),e.jsxs(l.div,{className:"flex flex-col sm:flex-row gap-4 justify-center items-center",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.6},children:[e.jsx(ue,{to:"/login",children:e.jsx(z,{size:"lg",className:"bg-gradient-to-r from-violet-500 to-purple-600 hover:from-violet-600 hover:to-purple-700 text-white shadow-2xl shadow-violet-500/25 px-8 py-4 text-lg font-semibold",children:e.jsxs("span",{className:"flex items-center gap-2",children:["Launch Your Brain",e.jsx(jt,{className:"w-5 h-5"})]})})}),e.jsx(z,{variant:"outline",size:"lg",className:"border-2 border-blue-300/30 text-blue-100 hover:bg-blue-500/10 px-8 py-4 text-lg font-semibold backdrop-blur-sm",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(qa,{className:"w-5 h-5"}),"Learn More"]})})]})]}),e.jsx(l.div,{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mb-16 max-w-6xl w-full",initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.8,delay:.7},children:[{icon:Le,title:"AI-Powered Intelligence",description:"Advanced AI algorithms help organize and connect your thoughts intelligently"},{icon:Ae,title:"Lightning Fast",description:"Instant capture and retrieval of your ideas with blazing-fast performance"},{icon:Ja,title:"Universal Access",description:"Access your second brain from anywhere, on any device, anytime"}].map((t,s)=>e.jsx(l.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:.8+s*.1},children:e.jsxs(D,{className:"p-6 text-center h-full hover:scale-105 transition-transform duration-300",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx(t.icon,{className:"w-12 h-12 text-violet-300"})}),e.jsx("h3",{className:"text-xl font-semibold text-white mb-3",children:t.title}),e.jsx("p",{className:"text-blue-100/70 leading-relaxed",children:t.description})]})},s))}),e.jsx(l.div,{className:"w-full max-w-4xl",initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.8,delay:1},children:e.jsxs(D,{className:"p-8",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Live Intelligence Feed"}),e.jsx("p",{className:"text-blue-100/70",children:"See how SYNAPSE processes information in real-time"})]}),e.jsx(As,{})]})}),e.jsxs(l.div,{className:"text-center mt-16",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:1.2},children:[e.jsx("p",{className:"text-lg text-blue-100/80 mb-6 max-w-2xl",children:"Join thousands of users who have revolutionized their thinking with SYNAPSE"}),e.jsx(ue,{to:"/register",children:e.jsx(z,{size:"lg",className:"bg-gradient-to-r from-emerald-500 to-teal-600 hover:from-emerald-600 hover:to-teal-700 text-white shadow-2xl shadow-emerald-500/25 px-8 py-4 text-lg font-semibold",children:e.jsxs("span",{className:"flex items-center gap-2",children:["Start Your Journey",e.jsx(pe,{className:"w-5 h-5"})]})})})]})]})]}),St=n.forwardRef(({className:t,...s},a)=>e.jsx("textarea",{className:E("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:a,...s}));St.displayName="Textarea";const ri=({task:t,isOpen:s,onClose:a,onSave:o})=>{const[i,r]=n.useState(""),[m,u]=n.useState(""),[c,x]=n.useState("pending"),[y,d]=n.useState("medium");if(n.useEffect(()=>{t?(r(t.title||""),u(t.description||""),x(t.status||"pending"),d(t.priority||"medium")):(r(""),u(""),x("pending"),d("medium"))},[t]),!s||!t)return null;const f=v=>{if(v.preventDefault(),!t)return;const k={...t,title:i,description:m,status:c,priority:y};o(k)},p={hidden:{opacity:0,scale:.9},visible:{opacity:1,scale:1},exit:{opacity:0,scale:.9,transition:{duration:.2}}};return e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:e.jsx(l.div,{variants:p,initial:"hidden",animate:"visible",exit:"exit",className:"w-full max-w-md",children:e.jsxs(D,{className:"p-6 md:p-8",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-6 text-foreground text-center",children:"Edit Task"}),e.jsxs("form",{onSubmit:f,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(J,{htmlFor:"title",className:"text-muted-foreground",children:"Title"}),e.jsx(ce,{type:"text",id:"title",value:i,onChange:v=>r(v.target.value),className:"mt-1 bg-background/50 border-border/50 focus:border-primary focus:ring-primary",required:!0})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"description",className:"text-muted-foreground",children:"Description"}),e.jsx(St,{id:"description",value:m,onChange:v=>u(v.target.value),rows:4,className:"mt-1 bg-background/50 border-border/50 focus:border-primary focus:ring-primary"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(J,{htmlFor:"status",className:"text-muted-foreground",children:"Status"}),e.jsxs(Ne,{value:c,onValueChange:v=>x(v),children:[e.jsx(fe,{id:"status",className:"mt-1 w-full bg-background/50 border-border/50 focus:border-primary focus:ring-primary",children:e.jsx(we,{placeholder:"Select status"})}),e.jsxs(be,{className:"bg-background/90 border-border/70 backdrop-blur-md",children:[e.jsx(V,{value:"pending",children:"Pending"}),e.jsx(V,{value:"in-progress",children:"In Progress"}),e.jsx(V,{value:"completed",children:"Completed"}),e.jsx(V,{value:"deferred",children:"Deferred"})]})]})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"priority",className:"text-muted-foreground",children:"Priority"}),e.jsxs(Ne,{value:y||"medium",onValueChange:v=>d(v),children:[e.jsx(fe,{id:"priority",className:"mt-1 w-full bg-background/50 border-border/50 focus:border-primary focus:ring-primary",children:e.jsx(we,{placeholder:"Select priority"})}),e.jsxs(be,{className:"bg-background/90 border-border/70 backdrop-blur-md",children:[e.jsx(V,{value:"low",children:"Low"}),e.jsx(V,{value:"medium",children:"Medium"}),e.jsx(V,{value:"high",children:"High"})]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx(z,{type:"button",onClick:a,variant:"outline",className:"border-muted-foreground/50 text-muted-foreground hover:bg-muted/20",children:"Cancel"}),e.jsx(z,{type:"submit",variant:"primary",children:"Save Changes"})]})]})]})})})},ii=({isOpen:t,onClose:s,onSave:a})=>{const[o,i]=n.useState(""),[r,m]=n.useState(""),[u,c]=n.useState("pending"),[x,y]=n.useState(void 0),[d,f]=n.useState(!1),[p,v]=n.useState(null);n.useEffect(()=>{t&&(i(""),m(""),c("pending"),y(void 0),v(null),f(!1))},[t]);const k=async b=>{if(b.preventDefault(),!o.trim()){v("Title is required.");return}v(null),f(!0);const T={title:o,description:r||void 0,status:u,priority:x||void 0};try{await a(T)}catch(L){const j=L instanceof Error?L.message:"Failed to save task. Please try again.";console.error("Error in AddTaskModal onSave:",j),v(j)}finally{f(!1)}};if(!t)return null;const S={hidden:{opacity:0,scale:.9},visible:{opacity:1,scale:1},exit:{opacity:0,scale:.9,transition:{duration:.2}}};return e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:e.jsx(l.div,{variants:S,initial:"hidden",animate:"visible",exit:"exit",className:"w-full max-w-lg",children:e.jsxs(D,{className:"p-6 md:p-8",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-6 text-foreground text-center",children:"Add New Task"}),p&&e.jsx(l.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-4",children:e.jsxs(Pe,{variant:"destructive",className:"glass border-red-500/30 bg-red-500/10 text-red-200",children:[e.jsx(de,{className:"h-4 w-4 text-red-300"}),e.jsx(Se,{className:"text-red-200 font-semibold",children:"Error"}),e.jsx(Ce,{className:"text-red-300/90",children:p})]})}),e.jsxs("form",{onSubmit:k,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs(J,{htmlFor:"title",className:"text-muted-foreground",children:["Title ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx(ce,{type:"text",id:"title",value:o,onChange:b=>i(b.target.value),className:"mt-1 bg-background/50 border-border/50 focus:border-primary focus:ring-primary",required:!0,disabled:d})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"description",className:"text-muted-foreground",children:"Description"}),e.jsx(St,{id:"description",value:r,onChange:b=>m(b.target.value),rows:4,className:"mt-1 bg-background/50 border-border/50 focus:border-primary focus:ring-primary",disabled:d})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(J,{htmlFor:"status",className:"text-muted-foreground",children:"Status"}),e.jsxs(Ne,{value:u,onValueChange:b=>c(b),disabled:d,children:[e.jsx(fe,{id:"status",className:"mt-1 w-full bg-background/50 border-border/50 focus:border-primary focus:ring-primary",children:e.jsx(we,{placeholder:"Select status"})}),e.jsxs(be,{className:"bg-background/90 border-border/70 backdrop-blur-md",children:[e.jsx(V,{value:"pending",children:"Pending"}),e.jsx(V,{value:"in-progress",children:"In Progress"}),e.jsx(V,{value:"completed",children:"Completed"}),e.jsx(V,{value:"deferred",children:"Deferred"})]})]})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"priority",className:"text-muted-foreground",children:"Priority"}),e.jsxs(Ne,{value:x||"",onValueChange:b=>y(b||void 0),disabled:d,children:[e.jsx(fe,{id:"priority",className:"mt-1 w-full bg-background/50 border-border/50 focus:border-primary focus:ring-primary",children:e.jsx(we,{placeholder:"Select priority"})}),e.jsxs(be,{className:"bg-background/90 border-border/70 backdrop-blur-md",children:[e.jsx(V,{value:"",children:"None"}),e.jsx(V,{value:"low",children:"Low"}),e.jsx(V,{value:"medium",children:"Medium"}),e.jsx(V,{value:"high",children:"High"})]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx(z,{type:"button",onClick:s,variant:"outline",disabled:d,className:"border-muted-foreground/50 text-muted-foreground hover:bg-muted/20",children:"Cancel"}),e.jsxs(z,{type:"submit",variant:"primary",loading:d,disabled:d,children:[d?"Saving Task...":"Save Task"," "]})]})]})]})})})},ni=da,oi=ma,li=ca,Ps=n.forwardRef(({className:t,...s},a)=>e.jsx(es,{className:E("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s,ref:a}));Ps.displayName=es.displayName;const _s=n.forwardRef(({className:t,...s},a)=>e.jsxs(li,{children:[e.jsx(Ps,{}),e.jsx(ts,{ref:a,className:E("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...s})]}));_s.displayName=ts.displayName;const zs=({className:t,...s})=>e.jsx("div",{className:E("flex flex-col space-y-2 text-center sm:text-left",t),...s});zs.displayName="AlertDialogHeader";const $s=({className:t,...s})=>e.jsx("div",{className:E("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s});$s.displayName="AlertDialogFooter";const Ms=n.forwardRef(({className:t,...s},a)=>e.jsx(ss,{ref:a,className:E("text-lg font-semibold",t),...s}));Ms.displayName=ss.displayName;const Rs=n.forwardRef(({className:t,...s},a)=>e.jsx(as,{ref:a,className:E("text-sm text-muted-foreground",t),...s}));Rs.displayName=as.displayName;const Fs=n.forwardRef(({className:t,...s},a)=>e.jsx(rs,{ref:a,className:E(kt(),t),...s}));Fs.displayName=rs.displayName;const Bs=n.forwardRef(({className:t,...s},a)=>e.jsx(is,{ref:a,className:E(kt({variant:"outline"}),"mt-2 sm:mt-0",t),...s}));Bs.displayName=is.displayName;const ci=()=>{const[t,s]=n.useState([]),[a,o]=n.useState(!0),[i,r]=n.useState(null),[m,u]=n.useState(""),[c,x]=n.useState("all"),y=B(N=>N.token),{toast:d}=Qe(),[f,p]=n.useState(null),[v,k]=n.useState(!1),[S,b]=n.useState(!1),T={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2}}},L={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{type:"spring",stiffness:100}}},j=async()=>{var N,q;if(!y){r("Authentication token not found. Please log in."),o(!1);return}o(!0);try{const X=await Y.get("/tasks");s(X.data),r(null)}catch(X){const O=((q=(N=X.response)==null?void 0:N.data)==null?void 0:q.message)||X.message||"Failed to fetch tasks.";console.error("Failed to fetch tasks:",O),r(O)}finally{o(!1)}};n.useEffect(()=>{j()},[y]);const A=async N=>{var q,X;if(!y){d({title:"Authentication Error",description:"Authentication token not found.",variant:"destructive"});return}try{await Y.delete(`/tasks/${N}`),s(O=>O.filter(G=>G._id!==N)),d({title:"Task Deleted",description:"Task deleted successfully!",variant:"default"})}catch(O){const G=((X=(q=O.response)==null?void 0:q.data)==null?void 0:X.message)||O.message||"Unknown error during deletion.";console.error("Failed to delete task:",G),d({title:"Deletion Failed",description:`Error: ${G}`,variant:"destructive"})}},Z=N=>{p(N),k(!0)},H=()=>{p(null),k(!1)},ne=async N=>{var q,X;if(!y||!N){d({title:"Update Error",description:"Missing data for update.",variant:"destructive"});return}try{const O={title:N.title,description:N.description,status:N.status,priority:N.priority},xe=(await Y.put(`/tasks/${N._id}`,O)).data;s(ze=>ze.map(Te=>Te._id===xe._id?xe:Te)),d({title:"Task Updated",description:"Task updated successfully!",variant:"default"}),H()}catch(O){const G=((X=(q=O.response)==null?void 0:q.data)==null?void 0:X.message)||O.message||"Unknown error during update.";console.error("Failed to update task:",G),d({title:"Update Failed",description:`Error: ${G}`,variant:"destructive"})}},P=()=>{b(!0)},F=()=>{b(!1)},K=async N=>{var q,X;if(!y){d({title:"Creation Error",description:"Authentication token not found. Please log in.",variant:"destructive"});return}try{const G=(await Y.post("/tasks",N)).data;s(xe=>[G,...xe]),d({title:"Task Created",description:"New task added successfully!",variant:"default"}),F()}catch(O){const G=((X=(q=O.response)==null?void 0:q.data)==null?void 0:X.message)||(O instanceof Error?O.message:"An unknown error occurred");console.error("Error creating task:",G),d({title:"Creation Failed",description:`Error: ${G}`,variant:"destructive"})}},w=t.filter(N=>{const q=N.title.toLowerCase().includes(m.toLowerCase()),X=(N.description||"").toLowerCase().includes(m.toLowerCase()),O=q||X,G=c==="all"||N.status===c;return O&&G}),C=t.length,I=t.filter(N=>N.status==="completed").length,M=t.filter(N=>N.status==="pending").length,W=t.filter(N=>N.status==="in-progress").length,re=N=>{switch(N){case"completed":return"bg-green-500/20 text-green-300 border-green-500/30";case"in-progress":return"bg-blue-500/20 text-blue-300 border-blue-500/30";case"pending":return"bg-yellow-500/20 text-yellow-300 border-yellow-500/30";default:return"bg-gray-500/20 text-gray-300 border-gray-500/30"}},me=N=>{switch(N){case"high":return"bg-red-500/20 text-red-300 border-red-500/30";case"medium":return"bg-orange-500/20 text-orange-300 border-orange-500/30";case"low":return"bg-green-500/20 text-green-300 border-green-500/30";default:return"bg-gray-500/20 text-gray-300 border-gray-500/30"}};return a?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-indigo-900 via-purple-900 to-pink-900 p-6 flex flex-col items-center text-white",children:[e.jsx(ae,{items:20}),e.jsxs(l.div,{className:"text-center z-10 mb-8",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:[e.jsx(ot,{className:"w-16 h-16 text-pink-400/70 mx-auto mb-4 animate-spin-slow"}),e.jsx("p",{className:"text-lg text-pink-200/80",children:"Loading your tasks..."})]}),e.jsxs("div",{className:"container mx-auto w-full max-w-4xl z-10",children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[...Array(4)].map((N,q)=>e.jsxs("div",{className:"h-24 bg-purple-500/10 p-4 rounded-lg",children:[e.jsx(ee,{className:"h-6 w-3/4 mb-2"}),e.jsx(ee,{className:"h-4 w-1/2"})]},`stat-skel-outer-${q}`))}),e.jsx("div",{className:"mb-6",children:e.jsx(ee,{className:"h-10 w-full bg-purple-500/10 rounded-md"})}),e.jsx("div",{className:"space-y-4",children:[...Array(3)].map((N,q)=>e.jsxs("div",{className:"h-28 bg-purple-500/10 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx(ee,{className:"h-5 w-2/3"}),e.jsx(ee,{className:"h-5 w-1/4"})]}),e.jsx(ks,{lines:2,className:"mb-3"}),e.jsxs("div",{className:"flex justify-end mt-2",children:[e.jsx(ee,{className:"h-8 w-16 mr-2 rounded"}),e.jsx(ee,{className:"h-8 w-16 rounded"})]})]},`task-item-skel-outer-${q}`))})]})]}):i?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-red-900 via-pink-900 to-rose-900 flex items-center justify-center p-6 text-white",children:[e.jsx(ae,{items:15,type:"error"}),e.jsxs(D,{className:"p-8 text-center max-w-md z-10",children:[e.jsx(de,{className:"w-12 h-12 text-red-400 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-white mb-2",children:"Error Loading Tasks"}),e.jsx("p",{className:"text-red-300 mb-4",children:i}),e.jsx(z,{onClick:j,className:"bg-red-500 hover:bg-red-600",children:"Try Again"})]})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-indigo-900 via-purple-900 to-pink-900 relative overflow-hidden",children:[e.jsx(ae,{items:30,particleClassName:"bg-pink-200/10"}),e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e.jsx(l.div,{className:"absolute w-96 h-96 bg-gradient-to-r from-purple-400/20 to-pink-400/20 rounded-full blur-3xl",style:{top:"10%",right:"10%"},animate:{x:[0,-60,0],y:[0,40,0],scale:[1,1.1,1]},transition:{duration:22,repeat:1/0,ease:"easeInOut"}}),e.jsx(l.div,{className:"absolute w-80 h-80 bg-gradient-to-r from-indigo-400/20 to-violet-400/20 rounded-full blur-3xl",style:{bottom:"20%",left:"10%"},animate:{x:[0,50,0],y:[0,-30,0],scale:[1,.9,1]},transition:{duration:18,repeat:1/0,ease:"easeInOut"}})]}),e.jsxs(l.div,{className:"relative z-10 container mx-auto p-4 md:p-6",variants:T,initial:"hidden",animate:"visible",children:[e.jsxs(l.div,{className:"text-center mb-8 md:mb-12",variants:L,children:[e.jsxs("div",{className:"flex items-center justify-center mb-4",children:[e.jsx(l.div,{animate:{rotate:[0,5,-5,0]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},children:e.jsx(tt,{className:"w-12 h-12 text-purple-400"})}),e.jsx(l.div,{className:"ml-2",animate:{scale:[1,1.1,1]},transition:{duration:2,repeat:1/0},children:e.jsx(pe,{className:"w-6 h-6 text-amber-400"})})]}),e.jsx("h1",{className:"text-4xl md:text-6xl font-bold bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent mb-4",children:"My Tasks"}),e.jsx("p",{className:"text-purple-100/80 text-lg max-w-2xl mx-auto",children:"Organize, track, and complete your goals with intelligent task management"})]}),e.jsxs(l.div,{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 mb-6 md:mb-8",variants:L,children:[e.jsxs(D,{className:"p-4 text-center hover:scale-105 transition-transform",children:[e.jsx(ot,{className:"w-7 h-7 text-pink-400 mx-auto mb-2"}),e.jsx("h3",{className:"text-xl font-bold text-white",children:C}),e.jsx("p",{className:"text-xs text-pink-100/70",children:"Total Tasks"})]}),e.jsxs(D,{className:"p-4 text-center hover:scale-105 transition-transform",children:[e.jsx(tt,{className:"w-7 h-7 text-green-400 mx-auto mb-2"}),e.jsx("h3",{className:"text-xl font-bold text-white",children:I}),e.jsx("p",{className:"text-xs text-green-100/70",children:"Completed"})]}),e.jsxs(D,{className:"p-4 text-center hover:scale-105 transition-transform",children:[e.jsx(bt,{className:"w-7 h-7 text-yellow-400 mx-auto mb-2"}),e.jsx("h3",{className:"text-xl font-bold text-white",children:M}),e.jsx("p",{className:"text-xs text-yellow-100/70",children:"Pending"})]}),e.jsxs(D,{className:"p-4 text-center hover:scale-105 transition-transform",children:[e.jsx(ft,{className:"w-7 h-7 text-blue-400 mx-auto mb-2"}),e.jsx("h3",{className:"text-xl font-bold text-white",children:W}),e.jsx("p",{className:"text-xs text-blue-100/70",children:"In Progress"})]})]}),e.jsx(l.div,{className:"mb-6 md:mb-8 p-4 bg-black/10 rounded-xl shadow-lg backdrop-blur-sm",variants:L,children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center",children:[e.jsxs("div",{className:"relative flex-grow w-full md:w-auto",children:[e.jsx(ce,{type:"text",placeholder:"Search tasks...",className:"pl-10 bg-white/5 border-white/10 placeholder-gray-400 text-white focus:border-pink-500 focus:ring-pink-500",value:m,onChange:N=>u(N.target.value)}),e.jsx(Ze,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"})]}),e.jsx("div",{className:"relative w-full md:w-auto md:min-w-[180px]",children:e.jsxs(Ne,{value:c,onValueChange:x,children:[e.jsxs(fe,{className:"w-full bg-white/5 border-white/10 text-white focus:border-pink-500 focus:ring-pink-500",children:[e.jsx(Ka,{className:"inline w-4 h-4 mr-2 text-gray-400"}),e.jsx(we,{placeholder:"Filter by status"})]}),e.jsxs(be,{className:"bg-gray-800/90 border-gray-700 text-white backdrop-blur-md",children:[e.jsx(V,{value:"all",className:"hover:bg-pink-500/20",children:"All Statuses"}),e.jsx(V,{value:"pending",className:"hover:bg-pink-500/20",children:"Pending"}),e.jsx(V,{value:"in-progress",className:"hover:bg-pink-500/20",children:"In Progress"}),e.jsx(V,{value:"completed",className:"hover:bg-pink-500/20",children:"Completed"})]})]})}),e.jsxs(z,{onClick:P,className:"w-full md:w-auto glow-purple-md",variant:"gradient",children:[e.jsx(vt,{className:"mr-2 h-5 w-5"})," Add New Task"]})]})}),w.length===0?e.jsx(l.div,{className:"text-center py-10",variants:L,children:e.jsxs(D,{className:"p-10 max-w-md mx-auto",children:[e.jsx(tt,{className:"w-16 h-16 text-pink-400/50 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"No tasks found"}),e.jsx("p",{className:"text-pink-100/70",children:"Try adjusting your search or filter, or add a new task!"})]})}):e.jsx(l.div,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6",variants:T,initial:"hidden",animate:"visible",children:w.map(N=>e.jsx(l.div,{variants:L,layout:!0,children:e.jsxs(D,{className:`p-4 md:p-5 flex flex-col h-full group transition-all duration-300 ease-in-out hover:shadow-pink-500/30 hover:border-pink-500/50 ${N.status==="completed"?"opacity-70 hover:opacity-100":""}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-white group-hover:text-pink-300 transition-colors",children:N.title}),e.jsx("span",{className:`px-2 py-1 text-xs rounded-md border ${re(N.status)}`,children:N.status||"unknown"})]}),e.jsx("p",{className:"text-sm text-gray-300/80 mb-3 flex-grow min-h-[40px]",children:N.description?N.description.length>100?N.description.substring(0,97)+"...":N.description:"No description"}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-400/80 mb-4",children:[e.jsxs("span",{className:`px-2 py-0.5 rounded-md border ${me(N.priority)}`,children:["Priority: ",N.priority||"normal"]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(Ie,{size:14,className:"mr-1"}),new Date(N.createdAt).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-auto pt-3 border-t border-white/10",children:[e.jsxs(z,{size:"sm",variant:"outline",onClick:()=>Z(N),className:"border-blue-500/50 text-blue-300 hover:bg-blue-500/20 hover:border-blue-500 glow-blue-sm",children:[e.jsx(dt,{size:14,className:"mr-1"})," Edit"]}),e.jsxs(ni,{children:[e.jsx(oi,{asChild:!0,children:e.jsxs(z,{size:"sm",variant:"outline",className:"border-red-500/50 text-red-300 hover:bg-red-500/20 hover:border-red-500 glow-red-sm",children:[e.jsx(ke,{size:14,className:"mr-1"})," Delete"]})}),e.jsxs(_s,{className:"glass bg-background/80 border-border/30",children:[e.jsxs(zs,{children:[e.jsx(Ms,{className:"text-foreground",children:"Are you absolutely sure?"}),e.jsxs(Rs,{className:"text-muted-foreground",children:['This action cannot be undone. This will permanently delete the task "',e.jsx("strong",{children:N.title}),'".']})]}),e.jsxs($s,{children:[e.jsx(Bs,{className:"hover:bg-muted/20",children:"Cancel"}),e.jsx(Fs,{onClick:()=>A(N._id),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})]})]})]})},N._id))}),v&&f&&e.jsx(ri,{isOpen:v,task:f,onClose:H,onSave:ne}),S&&e.jsx(ii,{isOpen:S,onClose:F,onSave:K})]})]})},di=({isOpen:t,note:s,onClose:a,onSave:o,existingError:i,clearError:r})=>{const[m,u]=n.useState(""),[c,x]=n.useState(""),[y,d]=n.useState(""),[f,p]=n.useState(!1),[v,k]=n.useState(null);n.useEffect(()=>{t&&s?(u(s.title||""),x(s.content||""),d(s.source||""),k(null),p(!1),i&&r&&k(i)):t||(u(""),x(""),d(""),k(null),p(!1))},[t,s,i]);const S=async T=>{if(T.preventDefault(),!s){k("No note selected for editing.");return}if(!c.trim()){k("Content is required.");return}k(null),r&&r(),p(!0);const L={title:m.trim()||void 0,content:c.trim(),source:y.trim()||void 0};try{await o(L,s._id)}catch(j){const A=j.message||"Failed to update note. Please try again.";k(A)}finally{p(!1)}},b=v||i;return!t||!s?null:e.jsx(l.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50 backdrop-blur-sm",children:e.jsxs(D,{className:"w-full max-w-md p-6 rounded-xl shadow-2xl text-white border-white/20",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-white",children:"Edit Note"}),e.jsx(l.button,{type:"button",onClick:a,disabled:f,className:"p-2 rounded-full hover:bg-white/10 disabled:opacity-50 transition-colors",whileHover:{scale:1.1},whileTap:{scale:.9},children:e.jsx(pt,{className:"w-5 h-5"})})]}),b&&e.jsxs("div",{className:"mb-4 p-3 bg-red-700/30 border border-red-500/50 rounded-md flex items-center gap-2",children:[e.jsx(de,{className:"w-5 h-5 text-red-400 flex-shrink-0"}),e.jsx("p",{className:"text-sm text-red-300",children:b})]}),e.jsxs("form",{onSubmit:S,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"edit-note-title",className:"block text-sm font-medium text-gray-300 mb-1",children:"Title (Optional)"}),e.jsx("input",{type:"text",id:"edit-note-title",value:m,onChange:T=>u(T.target.value),className:"w-full p-2.5 border border-white/20 rounded-lg bg-white/5 text-white placeholder-gray-400 focus:ring-2 focus:ring-lime-500 focus:border-lime-500 transition-colors",disabled:f})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"edit-note-content",className:"block text-sm font-medium text-gray-300 mb-1",children:["Content ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("textarea",{id:"edit-note-content",value:c,onChange:T=>x(T.target.value),rows:6,className:"w-full p-2.5 border border-white/20 rounded-lg bg-white/5 text-white placeholder-gray-400 focus:ring-2 focus:ring-lime-500 focus:border-lime-500 transition-colors scrollbar-thin scrollbar-thumb-white/20 scrollbar-track-transparent",required:!0,disabled:f})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"edit-note-source",className:"block text-sm font-medium text-gray-300 mb-1",children:"Source (Optional)"}),e.jsx("input",{type:"text",id:"edit-note-source",value:y,onChange:T=>d(T.target.value),className:"w-full p-2.5 border border-white/20 rounded-lg bg-white/5 text-white placeholder-gray-400 focus:ring-2 focus:ring-lime-500 focus:border-lime-500 transition-colors",disabled:f})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[e.jsx(z,{type:"button",onClick:a,disabled:f,variant:"ghost",className:"text-gray-300 hover:bg-white/10 hover:text-white",children:"Cancel"}),e.jsx(z,{type:"submit",disabled:f,loading:f,variant:"gradient",className:"bg-gradient-to-r from-lime-500 to-emerald-600 hover:shadow-emerald-500/30",children:f?"Saving...":"Save Changes"})]})]})]})})},We=`${De}/api/v1`,mi=()=>{const[t,s]=n.useState([]),[a,o]=n.useState(!0),[i,r]=n.useState(null),[m,u]=n.useState(""),c=B(w=>w.token),[x,y]=n.useState(!1),[d,f]=n.useState(null),[p,v]=n.useState(!1),k={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2}}},S={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{type:"spring",stiffness:100}}},b=async()=>{if(!c){r("Authentication token not found. Please log in."),o(!1);return}o(!0);try{const w=await fetch(`${We}/notes`,{headers:{Authorization:`Bearer ${c}`}}),C=w.headers.get("content-type");if(!w.ok){let M;if(C&&C.includes("application/json"))M=await w.json();else{const W=await w.text();throw new Error(`Server returned non-JSON error: ${w.status}. Response: ${W.substring(0,100)}...`)}throw new Error(M.message||`HTTP error! status: ${w.status}`)}if(!C||!C.includes("application/json")){const M=await w.text();throw new Error(`Expected JSON response, but got ${C}. Response: ${M.substring(0,100)}...`)}const I=await w.json();s(I),r(null)}catch(w){const C=w instanceof Error?w.message:"Failed to fetch notes.";console.error("Failed to fetch notes:",C),r(C)}finally{o(!1)}};n.useEffect(()=>{b()},[c]);const T=()=>{y(!0)},L=()=>{y(!1),r(null)},j=async w=>{if(!c){r("Authentication token not found. Please log in.");return}r(null);try{const C=await fetch(`${We}/notes`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${c}`},body:JSON.stringify(w)}),I=C.headers.get("content-type");if(!C.ok){let W;if(I&&I.includes("application/json"))W=await C.json();else{const re=await C.text();throw new Error(`Server returned non-JSON error: ${C.status}. Response: ${re.substring(0,100)}...`)}throw new Error(W.message||`Failed to create note. Status: ${C.status}`)}if(!I||!I.includes("application/json")){const W=await C.text();throw new Error(`Expected JSON response, but got ${I}. Response: ${W.substring(0,100)}...`)}const M=await C.json();s(W=>[M,...W]),L()}catch(C){const I=C instanceof Error?C.message:"An unknown error occurred";console.error("Error creating note:",I),r(I)}},A=w=>{f(w),v(!0)},Z=()=>{f(null),v(!1),r(null)},H=async(w,C)=>{if(!c){r("Authentication token not found. Please log in.");return}r(null);try{const I=await fetch(`${We}/notes/${C}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${c}`},body:JSON.stringify(w)}),M=I.headers.get("content-type");if(!I.ok){let re;if(M&&M.includes("application/json"))re=await I.json();else{const me=await I.text();throw new Error(`Server returned non-JSON error: ${I.status}. Response: ${me.substring(0,100)}...`)}throw new Error(re.message||`Failed to update note. Status: ${I.status}`)}if(!M||!M.includes("application/json")){const re=await I.text();throw new Error(`Expected JSON response, but got ${M}. Response: ${re.substring(0,100)}...`)}const W=await I.json();s(re=>re.map(me=>me._id===W._id?W:me)),Z()}catch(I){const M=I instanceof Error?I.message:"An unknown error occurred";console.error("Error updating note:",M),r(M)}},ne=async w=>{if(!c){alert("Authentication token not found. Please log in.");return}if(window.confirm("Are you sure you want to delete this note?")){r(null);try{const C=await fetch(`${We}/notes/${w}`,{method:"DELETE",headers:{Authorization:`Bearer ${c}`}}),I=C.headers.get("content-type");if(!C.ok){let M;if(I&&I.includes("application/json"))throw M=await C.json(),new Error(M.message||`Failed to delete note. Status: ${C.status}`);{const W=await C.text();if(W&&W.length>0)throw new Error(`Failed to delete note. Status: ${C.status}. Response: ${W.substring(0,100)}...`);if(C.status!==204)throw new Error(`Failed to delete note. Status: ${C.status}. Server returned no error message.`)}}s(M=>M.filter(W=>W._id!==w))}catch(C){const I=C instanceof Error?C.message:"An unknown error occurred";console.error("Error deleting note:",I),alert(`Error deleting note: ${I}`)}}},P=t.filter(w=>{var C;return((C=w.title)==null?void 0:C.toLowerCase().includes(m.toLowerCase()))||w.content.toLowerCase().includes(m.toLowerCase())}),F=t.length,K=t.filter(w=>{const C=new Date(w.createdAt),I=new Date;return I.setDate(I.getDate()-7),C>=I}).length;return a?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-lime-900 via-green-900 to-emerald-900 p-6 flex flex-col items-center text-white",children:[e.jsx(ae,{items:20,particleClassName:"bg-green-200/10"}),e.jsxs(l.div,{className:"text-center z-10 mb-8",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:[e.jsx(st,{className:"w-16 h-16 text-lime-400/70 mx-auto mb-4 animate-pulse"}),e.jsx("p",{className:"text-lg text-lime-200/80",children:"Loading your notes..."})]}),e.jsxs("div",{className:"container mx-auto w-full max-w-4xl z-10",children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6",children:[...Array(2)].map((w,C)=>e.jsx(Ke,{className:"h-24 bg-green-500/10"},C))}),e.jsx("div",{className:"mb-6",children:e.jsx(ee,{className:"h-10 w-full bg-green-500/10 rounded-md"})}),e.jsx("div",{className:"space-y-4",children:[...Array(3)].map((w,C)=>e.jsx(Ke,{className:"h-32 bg-green-500/10"},C))})]})]}):i&&!x&&!p?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-red-900 via-orange-800 to-rose-900 flex items-center justify-center p-6 text-white",children:[e.jsx(ae,{items:15,type:"error"}),e.jsxs(D,{className:"p-8 text-center max-w-md z-10",children:[e.jsx(de,{className:"w-12 h-12 text-red-400 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-red-300 mb-4",children:i}),e.jsx(z,{onClick:()=>{r(null),b()},variant:"ghost",className:"bg-red-500/20 hover:bg-red-600/30 text-red-200 border border-red-400/50",children:"Try Again"})]})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-lime-900 via-green-900 to-emerald-900 relative overflow-hidden",children:[e.jsx(ae,{items:30,particleClassName:"bg-green-200/15"}),e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e.jsx(l.div,{className:"absolute w-96 h-96 bg-gradient-to-r from-green-400/10 to-emerald-400/10 rounded-full blur-3xl animate-pulse-slow",style:{top:"5%",right:"15%"}}),e.jsx(l.div,{className:"absolute w-80 h-80 bg-gradient-to-r from-lime-400/10 to-green-400/10 rounded-full blur-3xl animate-pulse-medium",style:{bottom:"10%",left:"20%"}})]}),e.jsxs(l.div,{className:"relative z-10 container mx-auto p-4 md:p-6",variants:k,initial:"hidden",animate:"visible",children:[e.jsxs(l.div,{className:"text-center mb-8 md:mb-12",variants:S,children:[e.jsxs("div",{className:"flex items-center justify-center mb-4",children:[e.jsx(st,{className:"w-10 h-10 md:w-12 md:h-12 text-lime-300"}),e.jsx("h1",{className:`ml-4 text-4xl md:text-5xl font-bold \r
              bg-clip-text text-transparent bg-gradient-to-r from-lime-300 via-green-300 to-emerald-400`,children:"My Notes"}),e.jsx(pe,{className:"ml-3 w-7 h-7 text-emerald-400 opacity-70"})]}),e.jsx("p",{className:"text-lg md:text-xl text-green-200/80 max-w-2xl mx-auto",children:"Capture, organize, and revisit your thoughts and ideas seamlessly."})]}),e.jsxs(l.div,{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6 md:mb-8 max-w-lg mx-auto",variants:S,children:[e.jsxs(D,{className:"p-4 text-center hover:scale-105 transition-transform",children:[e.jsx(he,{className:"w-7 h-7 text-lime-400 mx-auto mb-2"}),e.jsx("h3",{className:"text-xl font-bold text-white",children:F}),e.jsx("p",{className:"text-xs text-lime-100/70",children:"Total Notes"})]}),e.jsxs(D,{className:"p-4 text-center hover:scale-105 transition-transform",children:[e.jsx(Ie,{className:"w-7 h-7 text-emerald-400 mx-auto mb-2"}),e.jsx("h3",{className:"text-xl font-bold text-white",children:K}),e.jsx("p",{className:"text-xs text-emerald-100/70",children:"Added This Week"})]})]}),e.jsx(l.div,{className:"mb-6 md:mb-8 p-4 bg-black/10 rounded-xl shadow-lg backdrop-blur-sm max-w-3xl mx-auto",variants:S,children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center",children:[e.jsxs("div",{className:"relative flex-grow w-full md:w-auto",children:[e.jsx(ce,{type:"text",placeholder:"Search notes by title or content...",className:"pl-10 bg-white/5 border-white/10 placeholder-gray-400 text-white focus:border-lime-500 focus:ring-lime-500 transition-shadow duration-300 focus:shadow-lime-500/30",value:m,onChange:w=>u(w.target.value)}),e.jsx(Ze,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"})]}),e.jsxs(z,{onClick:T,variant:"gradient",className:"w-full md:w-auto from-lime-500 via-green-500 to-emerald-600 hover:shadow-green-500/40 text-white glow-effect-green",children:[e.jsx(vt,{className:"mr-2 h-5 w-5"})," Add New Note"]})]})}),P.length===0&&!a?e.jsx(l.div,{className:"text-center py-10",variants:S,children:e.jsxs(D,{className:"p-10 max-w-md mx-auto",children:[e.jsx(st,{className:"w-16 h-16 text-lime-400/50 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"No notes found"}),e.jsx("p",{className:"text-lime-100/70",children:"Try adjusting your search, or create your first note!"})]})}):e.jsx(l.div,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6",variants:k,initial:"hidden",animate:"visible",children:P.map(w=>e.jsx(l.div,{variants:S,layout:!0,children:e.jsxs(D,{className:"p-4 md:p-5 flex flex-col h-full group transition-all duration-300 ease-in-out hover:shadow-lime-500/30 hover:border-lime-500/50",glowColor:"rgba(163, 230, 53, 0.4)",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-white group-hover:text-lime-300 transition-colors line-clamp-2",children:w.title||"Untitled Note"}),w.source&&e.jsx("span",{className:"px-2 py-1 bg-emerald-500/20 text-emerald-300 text-xs rounded-md whitespace-nowrap",children:w.source})]}),e.jsx("p",{className:"text-sm text-gray-300/80 mb-3 flex-grow min-h-[60px] whitespace-pre-wrap overflow-y-auto max-h-32 scrollbar-thin scrollbar-thumb-white/20 scrollbar-track-transparent",children:w.content.length>200?w.content.substring(0,197)+"...":w.content}),e.jsx("div",{className:"text-xs text-gray-400/80 mt-auto pt-2 border-t border-white/10",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(Ie,{size:14,className:"mr-1"}),"Created: ",new Date(w.createdAt).toLocaleDateString()]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(dt,{size:12,className:"mr-1"}),"Updated: ",new Date(w.updatedAt).toLocaleDateString()]})]})}),e.jsxs("div",{className:"flex justify-end gap-2 mt-3",children:[e.jsxs(z,{size:"sm",variant:"ghost",onClick:()=>A(w),className:"border border-sky-500/50 text-sky-300 hover:bg-sky-500/20 hover:border-sky-500 hover:text-sky-200 glow-effect-sky-sm",children:[e.jsx(dt,{size:14,className:"mr-1"})," Edit"]}),e.jsxs(z,{size:"sm",variant:"ghost",onClick:()=>ne(w._id),className:"border border-rose-500/50 text-rose-300 hover:bg-rose-500/20 hover:border-rose-500 hover:text-rose-200 glow-effect-rose-sm",children:[e.jsx(ke,{size:14,className:"mr-1"})," Delete"]})]})]})},w._id))}),x&&e.jsx(Ss,{isOpen:x,onClose:L,onSave:j,existingError:i,clearError:()=>r(null)}),p&&d&&e.jsx(di,{isOpen:p,note:d,onClose:Z,onSave:w=>H(w,d._id),existingError:i,clearError:()=>r(null)})]})]})},ui=()=>{const[t,s]=n.useState([]),[a,o]=n.useState(!0),[i,r]=n.useState(null),m=B(d=>d.token),u={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2}}},c={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{type:"spring",stiffness:100}}};n.useEffect(()=>{(async()=>{if(!m){r("Authentication token not found."),o(!1);return}try{o(!0);const f=await fetch(`${De}/api/v1/ideas`,{headers:{Authorization:`Bearer ${m}`}});if(!f.ok){const v=await f.json();throw new Error(v.message||`HTTP error! status: ${f.status}`)}const p=await f.json();s(p),r(null)}catch(f){console.error("Failed to fetch ideas:",f),r(f.message||"Failed to fetch ideas.")}finally{o(!1)}})()},[m]);const x=t.length,y=t.filter(d=>{const f=new Date(d.createdAt),p=new Date;return p.setDate(p.getDate()-7),f>=p}).length;return a?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-amber-900 via-orange-900 to-yellow-900 p-6 flex flex-col justify-center items-center text-white",children:[e.jsx(ae,{items:20}),e.jsxs(l.div,{className:"text-center z-10",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:[e.jsx(Me,{className:"w-16 h-16 text-yellow-400/70 mx-auto mb-4 animate-pulse"}),e.jsx("p",{className:"text-lg text-yellow-200/80",children:"Loading your brilliant ideas..."})]}),e.jsxs("div",{className:"container mx-auto mt-8 w-full max-w-3xl z-10",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[e.jsx(Ke,{className:"h-28 bg-yellow-500/10"}),e.jsx(Ke,{className:"h-28 bg-yellow-500/10"})]}),e.jsx("div",{className:"space-y-4",children:[...Array(3)].map((d,f)=>e.jsx(ee,{className:"h-20 w-full bg-yellow-500/10 rounded-lg"},f))})]})]}):i?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-red-900 via-orange-900 to-yellow-900 flex items-center justify-center p-6 text-white",children:[e.jsx(ae,{items:15,type:"error"}),e.jsxs(D,{className:"p-8 text-center max-w-md z-10",children:[e.jsx(de,{className:"w-12 h-12 text-red-400 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-white mb-2",children:"Error Loading Ideas"}),e.jsx("p",{className:"text-red-300 mb-4",children:i})]})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-amber-900 via-orange-900 to-yellow-900 relative overflow-hidden",children:[e.jsx(ae,{items:35}),e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e.jsx(l.div,{className:"absolute w-96 h-96 bg-gradient-to-r from-yellow-400/20 to-amber-400/20 rounded-full blur-3xl",style:{top:"10%",right:"10%"},animate:{x:[0,-50,0],y:[0,40,0],scale:[1,1.1,1]},transition:{duration:20,repeat:1/0,ease:"easeInOut"}}),e.jsx(l.div,{className:"absolute w-80 h-80 bg-gradient-to-r from-orange-400/20 to-red-400/20 rounded-full blur-3xl",style:{bottom:"20%",left:"10%"},animate:{x:[0,60,0],y:[0,-30,0],scale:[1,.9,1]},transition:{duration:25,repeat:1/0,ease:"easeInOut"}})]}),e.jsxs(l.div,{className:"relative z-10 container mx-auto p-6",variants:u,initial:"hidden",animate:"visible",children:[e.jsxs(l.div,{className:"text-center mb-12",variants:c,children:[e.jsxs("div",{className:"flex items-center justify-center mb-4",children:[e.jsx(l.div,{animate:{rotate:[0,5,-5,0]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},children:e.jsx(Me,{className:"w-12 h-12 text-yellow-400"})}),e.jsx(l.div,{className:"ml-2",animate:{scale:[1,1.1,1]},transition:{duration:2,repeat:1/0},children:e.jsx(pe,{className:"w-6 h-6 text-amber-400"})})]}),e.jsx("h1",{className:"text-4xl md:text-6xl font-bold bg-gradient-to-r from-yellow-400 to-orange-400 bg-clip-text text-transparent mb-4",children:"My Ideas"}),e.jsx("p",{className:"text-yellow-100/80 text-lg max-w-2xl mx-auto",children:"Capture and explore your creative thoughts and innovative concepts"})]}),e.jsxs(l.div,{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8 max-w-2xl mx-auto",variants:c,children:[e.jsxs(D,{className:"p-6 text-center hover:scale-105 transition-transform duration-300",children:[e.jsx(Le,{className:"w-8 h-8 text-yellow-400 mx-auto mb-3"}),e.jsx("h3",{className:"text-2xl font-bold text-white mb-1",children:x}),e.jsx("p",{className:"text-yellow-100/70",children:"Total Ideas"})]}),e.jsxs(D,{className:"p-6 text-center hover:scale-105 transition-transform duration-300",children:[e.jsx(Ae,{className:"w-8 h-8 text-orange-400 mx-auto mb-3"}),e.jsx("h3",{className:"text-2xl font-bold text-white mb-1",children:y}),e.jsx("p",{className:"text-yellow-100/70",children:"This Week"})]})]}),t.length===0?e.jsx(l.div,{className:"text-center py-16",variants:c,children:e.jsxs(D,{className:"p-12 max-w-md mx-auto",children:[e.jsx(Me,{className:"w-16 h-16 text-yellow-400/50 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"No ideas yet"}),e.jsx("p",{className:"text-yellow-100/70 mb-6",children:"Your brilliant ideas will appear here as you capture them"})]})}):e.jsx(l.div,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",variants:u,initial:"hidden",animate:"visible",children:t.map((d,f)=>e.jsx(l.div,{variants:c,whileHover:{y:-5,scale:1.03},transition:{type:"spring",stiffness:300,damping:15},children:e.jsxs(D,{className:"p-6 h-full flex flex-col hover:scale-105 transition-transform duration-300",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-yellow-500/20 rounded-lg flex-shrink-0",children:e.jsx(Me,{className:"w-5 h-5 text-yellow-400"})}),e.jsx("p",{className:"text-yellow-100/90 leading-relaxed whitespace-pre-wrap",children:d.content})]})}),e.jsxs("div",{className:"border-t border-white/10 pt-4 mt-4",children:[e.jsx("div",{className:"flex items-center justify-between text-sm text-yellow-200/60 mb-2",children:e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ie,{className:"w-3 h-3"}),new Date(d.createdAt).toLocaleDateString()]})}),d.source&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Xa,{className:"w-3 h-3 text-orange-400"}),e.jsx("span",{className:"px-2 py-1 bg-orange-500/20 rounded text-orange-300 text-xs",children:d.source})]})]})]})},d._id))})]})]})};class xi{constructor(){At(this,"baseURL","/meetings")}async getMeetings(s){try{return(await Y.get(this.baseURL,{params:s})).data}catch(a){throw console.error("[MeetingService]: Error fetching meetings:",a),a}}async uploadAudioForTranscription(s,a){try{const o=new FormData;return o.append("audio",a),(await Y.post(`${this.baseURL}/${s}/upload-audio`,o,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(o){throw console.error(`[MeetingService]: Error uploading audio for meeting ${s}:`,o),o}}async getMeeting(s){try{return(await Y.get(`${this.baseURL}/${s}`)).data}catch(a){throw console.error("[MeetingService]: Error fetching meeting:",a),a}}async createMeeting(s){try{return(await Y.post(this.baseURL,s)).data}catch(a){throw console.error("[MeetingService]: Error creating meeting:",a),a}}async updateMeeting(s,a){try{return(await Y.put(`${this.baseURL}/${s}`,a)).data}catch(o){throw console.error("[MeetingService]: Error updating meeting:",o),o}}async deleteMeeting(s){try{await Y.delete(`${this.baseURL}/${s}`)}catch(a){throw console.error("[MeetingService]: Error deleting meeting:",a),a}}async processTranscription(s,a){try{return(await Y.post(`${this.baseURL}/${s}/transcription`,a)).data}catch(o){throw console.error("[MeetingService]: Error processing transcription:",o),o}}async reprocessMeeting(s){try{return(await Y.post(`${this.baseURL}/${s}/reprocess`)).data}catch(a){throw console.error("[MeetingService]: Error reprocessing meeting:",a),a}}async getMeetingStats(){try{return(await Y.get(`${this.baseURL}/stats`)).data}catch(s){throw console.error("[MeetingService]: Error fetching meeting stats:",s),s}}async pollMeetingStatus(s,a,o=60,i=2e3){let r=0;return new Promise((m,u)=>{const c=async()=>{try{r++;const x=await this.getMeeting(s);if(a&&a(x),x.status==="completed"){m(x);return}if(x.status==="failed"){u(new Error(x.errorMessage||"Meeting processing failed"));return}if(r>=o){u(new Error("Polling timeout: Meeting processing took too long"));return}x.status==="processing"?setTimeout(c,i):m(x)}catch(x){u(x)}};c()})}formatMeetingDate(s){return new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}getStatusColor(s){switch(s){case"completed":return"text-green-600";case"processing":return"text-blue-600";case"failed":return"text-red-600";case"recording":return"text-orange-600";default:return"text-gray-600"}}getStatusText(s){switch(s){case"completed":return"Completed";case"processing":return"Processing";case"failed":return"Failed";case"recording":return"Recording";default:return"Unknown"}}getEstimatedReadingTime(s){if(!s)return"0 min";const a=200,o=s.split(/\s+/).length;return`${Math.ceil(o/a)} min read`}getPriorityColor(s){switch(s){case"high":return"text-red-600 bg-red-50";case"medium":return"text-yellow-600 bg-yellow-50";case"low":return"text-green-600 bg-green-50";default:return"text-gray-600 bg-gray-50"}}}const se=new xi,hi=()=>{const[t,s]=n.useState([]),[a,o]=n.useState(null),[i,r]=n.useState(!0),[m,u]=n.useState(null),[c,x]=n.useState(null),[y,d]=n.useState(!1),[f,p]=n.useState(!1),[v,k]=n.useState(!1),[S,b]=n.useState(0),[T,L]=n.useState([]),j=n.useRef(null),[A,Z]=n.useState("api"),[H,ne]=n.useState(1),[P,F]=n.useState(1),[K,w]=n.useState(""),[C,I]=n.useState(""),[M,W]=n.useState("");n.useEffect(()=>{re(),me()},[H]),n.useEffect(()=>{let g;return v&&(g=setInterval(()=>{b(_=>_+1)},1e3)),()=>clearInterval(g)},[v]);const re=async()=>{try{r(!0);const g=await se.getMeetings({page:H,limit:10});s(g.meetings),F(g.pagination.pages),u(null)}catch(g){u("Failed to load meetings"),console.error("Error loading meetings:",g)}finally{r(!1)}},me=async()=>{try{const g=await se.getMeetingStats();o(g)}catch(g){console.error("Error loading stats:",g)}},N=async()=>{if(K.trim())try{const g=await se.createMeeting({title:K,description:C,transcriptionMethod:A,meetingDate:new Date().toISOString()});s(_=>[g,..._]),d(!1),w(""),I(""),me()}catch(g){u("Failed to create meeting"),console.error("Error creating meeting:",g)}},q=async()=>{if(!(!c||!M.trim()))try{await se.processTranscription(c._id,{transcription:M}),se.pollMeetingStatus(c._id,g=>{s(_=>_.map(oe=>oe._id===g._id?g:oe)),c._id===g._id&&x(g)}).catch(console.error),p(!1),W("")}catch(g){u("Failed to process transcription"),console.error("Error processing transcription:",g)}},X=async g=>{if(confirm("Are you sure you want to delete this meeting?"))try{await se.deleteMeeting(g),s(_=>_.filter(oe=>oe._id!==g)),(c==null?void 0:c._id)===g&&x(null),me()}catch(_){u("Failed to delete meeting"),console.error("Error deleting meeting:",_)}},O=async g=>{try{await se.reprocessMeeting(g),se.pollMeetingStatus(g,_=>{s(oe=>oe.map(je=>je._id===_._id?_:je)),(c==null?void 0:c._id)===_._id&&x(_)}).catch(console.error)}catch(_){u("Failed to reprocess meeting"),console.error("Error reprocessing meeting:",_)}},G=async()=>{k(!0),b(0),L([]);try{const g=await navigator.mediaDevices.getUserMedia({audio:!0}),_=new MediaRecorder(g);j.current=_,_.ondataavailable=oe=>{oe.data.size>0&&L(je=>[...je,oe.data])},_.onstop=async()=>{const oe=new Blob(T,{type:"audio/webm"}),je=new File([oe],"recording.webm",{type:"audio/webm"});if(!c){u("No meeting selected to associate the recording with. Please select a meeting or create a new one before recording."),console.error("No meeting selected for recording. Audio chunks cleared."),L([]);return}try{await se.uploadAudioForTranscription(c._id,je),re(),c!=null&&c._id&&se.pollMeetingStatus(c._id,ye=>{s(et=>et.map(He=>He._id===ye._id?ye:He)),c._id===ye._id&&x(ye)}).catch(console.error)}catch(ye){u("Failed to upload audio for transcription. Please try again."),console.error("Error uploading audio:",ye)}finally{L([])}},_.start()}catch(g){console.error("Error accessing microphone or starting recording:",g),u("Failed to start recording. Please check microphone permissions."),k(!1)}},xe=()=>{var g;k(!1),j.current&&j.current.state==="recording"&&j.current.stop(),(g=j.current)!=null&&g.stream&&j.current.stream.getTracks().forEach(_=>_.stop()),j.current=null},ze=g=>{const _=Math.floor(g/60),oe=g%60;return`${_.toString().padStart(2,"0")}:${oe.toString().padStart(2,"0")}`},Te=g=>{switch(g){case"completed":return e.jsx(yt,{className:"w-4 h-4 text-green-600"});case"processing":return e.jsx(Re,{className:"w-4 h-4 text-blue-600 animate-spin"});case"failed":return e.jsx(de,{className:"w-4 h-4 text-red-600"});case"recording":return e.jsx(nt,{className:"w-4 h-4 text-orange-600"});default:return e.jsx(bt,{className:"w-4 h-4 text-gray-600"})}};return i&&t.length===0?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(Re,{className:"w-8 h-8 animate-spin"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Meetings"}),e.jsx("p",{className:"text-gray-600",children:"Record, transcribe, and analyze your meetings"})]}),e.jsxs(R,{onClick:()=>d(!0),className:"flex items-center gap-2",children:[e.jsx(vt,{className:"w-4 h-4"}),"New Meeting"]})]}),m&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(de,{className:"w-5 h-5 text-red-600"}),e.jsx("span",{className:"text-red-800",children:m})]})}),a&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsxs(Q,{className:"p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:a.totalMeetings}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Meetings"})]}),e.jsxs(Q,{className:"p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:a.completedMeetings}),e.jsx("div",{className:"text-sm text-gray-600",children:"Completed"})]}),e.jsxs(Q,{className:"p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:a.processingMeetings}),e.jsx("div",{className:"text-sm text-gray-600",children:"Processing"})]}),e.jsxs(Q,{className:"p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:a.failedMeetings}),e.jsx("div",{className:"text-sm text-gray-600",children:"Failed"})]}),e.jsxs(Q,{className:"p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:a.recentMeetings}),e.jsx("div",{className:"text-sm text-gray-600",children:"This Week"})]})]}),e.jsxs(Q,{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Quick Record"}),e.jsxs("div",{className:"flex items-center gap-4",children:[v?e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(R,{onClick:xe,variant:"destructive",className:"flex items-center gap-2",children:[e.jsx(Za,{className:"w-4 h-4"}),"Stop Recording"]}),e.jsxs("div",{className:"flex items-center gap-2 text-red-600",children:[e.jsx("div",{className:"w-3 h-3 bg-red-600 rounded-full animate-pulse"}),e.jsx("span",{className:"font-mono text-lg",children:ze(S)})]})]}):e.jsxs(R,{onClick:G,className:"flex items-center gap-2",children:[e.jsx(nt,{className:"w-4 h-4"}),"Start Recording"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Xe,{className:"w-4 h-4"}),e.jsxs("select",{value:A,onChange:g=>Z(g.target.value),className:"border rounded px-2 py-1",children:[e.jsx("option",{value:"api",children:"API Transcription"}),e.jsx("option",{value:"local",children:"Local Transcription"}),e.jsx("option",{value:"dedicated",children:"Dedicated Service"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Recent Meetings"}),t.map(g=>e.jsx(Q,{className:"p-4 hover:shadow-md transition-shadow cursor-pointer",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",onClick:()=>x(g),children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[Te(g.status),e.jsx("h3",{className:"font-semibold",children:g.title})]}),g.description&&e.jsx("p",{className:"text-gray-600 text-sm mb-2",children:g.description}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ie,{className:"w-3 h-3"}),se.formatMeetingDate(g.meetingDate)]}),e.jsx("span",{className:se.getStatusColor(g.status),children:se.getStatusText(g.status)}),g.processingProgress!==void 0&&g.status==="processing"&&e.jsxs("span",{children:[g.processingProgress,"%"]})]})]}),e.jsxs("div",{className:"flex items-center gap-1 ml-4",children:[g.status==="completed"&&!g.transcription&&e.jsx(R,{size:"sm",variant:"outline",onClick:()=>{x(g),p(!0)},children:e.jsx(he,{className:"w-3 h-3"})}),g.status==="failed"&&e.jsx(R,{size:"sm",variant:"outline",onClick:()=>O(g._id),children:e.jsx(hs,{className:"w-3 h-3"})}),e.jsx(R,{size:"sm",variant:"outline",onClick:()=>X(g._id),children:e.jsx(ke,{className:"w-3 h-3"})})]})]})},g._id)),P>1&&e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx(R,{variant:"outline",disabled:H===1,onClick:()=>ne(g=>g-1),children:"Previous"}),e.jsxs("span",{className:"flex items-center px-4",children:["Page ",H," of ",P]}),e.jsx(R,{variant:"outline",disabled:H===P,onClick:()=>ne(g=>g+1),children:"Next"})]})]}),e.jsx("div",{children:c?e.jsxs(Q,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:c.title}),e.jsxs("div",{className:"flex items-center gap-2",children:[Te(c.status),e.jsx("span",{className:se.getStatusColor(c.status),children:se.getStatusText(c.status)})]})]}),c.description&&e.jsx("p",{className:"text-gray-600 mb-4",children:c.description}),e.jsxs("div",{className:"space-y-4",children:[c.transcription&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Transcription"}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg max-h-40 overflow-y-auto",children:e.jsx("p",{className:"text-sm",children:c.transcription})}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:se.getEstimatedReadingTime(c.transcription)})]}),c.summary&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Summary"}),e.jsx("p",{className:"text-sm text-gray-700",children:c.summary})]}),c.keyHighlights&&c.keyHighlights.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Key Highlights"}),e.jsx("ul",{className:"space-y-1",children:c.keyHighlights.map((g,_)=>e.jsxs("li",{className:"text-sm text-gray-700 flex items-start gap-2",children:[e.jsx("span",{className:"text-blue-600 mt-1",children:"â€¢"}),g]},_))})]}),c.extractedTasks&&c.extractedTasks.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Extracted Tasks"}),e.jsx("div",{className:"space-y-2",children:c.extractedTasks.map((g,_)=>e.jsxs("div",{className:"border rounded p-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium text-sm",children:g.title}),g.priority&&e.jsx("span",{className:`px-2 py-1 rounded text-xs ${se.getPriorityColor(g.priority)}`,children:g.priority})]}),g.description&&e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:g.description})]},_))})]}),c.extractedNotes&&c.extractedNotes.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Extracted Notes"}),e.jsx("div",{className:"space-y-2",children:c.extractedNotes.map((g,_)=>e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded p-2",children:e.jsx("p",{className:"text-sm",children:g.content})},_))})]})]})]}):e.jsxs(Q,{className:"p-6 text-center text-gray-500",children:[e.jsx(bs,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"Select a meeting to view details"})]})})]}),y&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs(Q,{className:"p-6 w-full max-w-md",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Create New Meeting"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(J,{htmlFor:"title",children:"Title"}),e.jsx(ce,{id:"title",value:K,onChange:g=>w(g.target.value),placeholder:"Meeting title"})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"description",children:"Description (Optional)"}),e.jsx(ce,{id:"description",value:C,onChange:g=>I(g.target.value),placeholder:"Meeting description"})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"method",children:"Transcription Method"}),e.jsxs("select",{id:"method",value:A,onChange:g=>Z(g.target.value),className:"w-full border rounded px-3 py-2",children:[e.jsx("option",{value:"api",children:"API Transcription"}),e.jsx("option",{value:"local",children:"Local Transcription"}),e.jsx("option",{value:"dedicated",children:"Dedicated Service"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(R,{onClick:N,disabled:!K.trim(),children:"Create Meeting"}),e.jsx(R,{variant:"outline",onClick:()=>d(!1),children:"Cancel"})]})]})]})}),f&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs(Q,{className:"p-6 w-full max-w-2xl",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Add Transcription"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(J,{htmlFor:"transcription",children:"Transcription Text"}),e.jsx("textarea",{id:"transcription",value:M,onChange:g=>W(g.target.value),placeholder:"Paste or type the meeting transcription here...",className:"w-full border rounded px-3 py-2 h-40 resize-none"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(R,{onClick:q,disabled:!M.trim(),children:"Process Transcription"}),e.jsx(R,{variant:"outline",onClick:()=>p(!1),children:"Cancel"})]})]})]})})]})},gi=()=>{const t=B(a=>a.isAuthenticated),s={}.VITE_GOOGLE_CLIENT_ID;return s||console.error("VITE_GOOGLE_CLIENT_ID is not defined. Google Sign-In will not work."),e.jsx(ns,{clientId:s||"",children:e.jsx(ys,{defaultTheme:"dark",storageKey:"vite-ui-theme",children:e.jsx(ua,{children:e.jsx(Nr,{children:e.jsx("main",{className:"flex-1",children:e.jsxs(It,{children:[e.jsx(le,{path:"/login",element:t?e.jsx($e,{to:"/dashboard"}):e.jsx(Mr,{})}),e.jsx(le,{path:"/register",element:t?e.jsx($e,{to:"/dashboard"}):e.jsx(Rr,{})}),e.jsx(le,{path:"/",element:t?e.jsx($e,{to:"/dashboard"}):e.jsx(ai,{})}),e.jsx(le,{path:"/*",element:t?e.jsx(dr,{children:e.jsxs(It,{children:[e.jsx(le,{path:"dashboard",element:e.jsx(Cr,{})}),e.jsx(le,{path:"inbox",element:e.jsx(Ir,{})}),e.jsx(le,{path:"images",element:e.jsx(Fr,{})}),e.jsx(le,{path:"bookmarks",element:e.jsx(Zr,{})}),e.jsx(le,{path:"videos",element:e.jsx(si,{})}),e.jsx(le,{path:"tasks",element:e.jsx(ci,{})}),e.jsx(le,{path:"notes",element:e.jsx(mi,{})}),e.jsx(le,{path:"ideas",element:e.jsx(ui,{})}),e.jsx(le,{path:"meetings",element:e.jsx(hi,{})}),e.jsx(le,{path:"settings",element:e.jsx(Pr,{})}),e.jsx(le,{path:"*",element:e.jsx($e,{to:"/dashboard",replace:!0})})]})}):e.jsx($e,{to:"/login",replace:!0})})]})})})})})})};const pi="YOUR_GOOGLE_CLIENT_ID.apps.googleusercontent.com";xa.createRoot(document.getElementById("root")).render(e.jsx(Je.StrictMode,{children:e.jsx(ns,{clientId:pi,children:e.jsx(ys,{defaultTheme:"dark",storageKey:"vite-ui-theme",children:e.jsx(Ar,{children:e.jsx(gi,{})})})})}));
