# Telegram Session Generation Guide

This guide will help you generate the `TELEGRAM_USER_SESSION` variable needed for your Synapse project's Telegram integration.

## Prerequisites

1. **Telegram Account**: You need access to the phone number associated with your Telegram account
2. **Telegram API Credentials**: You'll need your API ID and API Hash from [my.telegram.org](https://my.telegram.org)
3. **Node.js**: Make sure you have Node.js installed (version 18+ recommended)

## Step-by-Step Instructions

### 1. Get Your Telegram API Credentials

1. Go to [my.telegram.org](https://my.telegram.org)
2. Log in with your phone number
3. Click on "API development tools"
4. Create a new application (if you haven't already)
5. Note down your `API ID` and `API Hash`

### 2. Run the Session Generation Script

The project already includes a session generation script. Run it with your credentials:

```bash
# Navigate to your project directory
cd /mnt/c/Users/Miki_gabay/Desktop/Workspace/Synapse

# Run the session generator with your credentials
TELEGRAM_API_ID=28000602 \
TELEGRAM_API_HASH=8769794b3d6e951ef92508a0469311ef \
TELEGRAM_LOGIN_PHONE=+972507102492 \
npx ts-node generate-telegram-session.ts
```

### 3. Complete the Authentication Flow

1. **Enter Verification Code**: The script will prompt you to enter the verification code that Telegram sends to your phone
2. **Enter 2FA Password** (if applicable): If you have two-factor authentication enabled, enter your password when prompted
3. **Copy the Session String**: Once authenticated, the script will output a long session string

### 4. Set Up Environment Variables

Copy the generated session string and add it to your environment variables:

#### For Render.com Deployment:
1. Go to your Render dashboard
2. Navigate to your service settings
3. Add a new environment variable:
   - **Key**: `TELEGRAM_USER_SESSION`
   - **Value**: The long string generated by the script
4. Redeploy your service

#### For Local Development:
Add to your `.env` file:
```env
TELEGRAM_USER_SESSION=your_generated_session_string_here
```

## Expected Output

When successful, you'll see something like:

```
üöÄ Telegram Session Generator for Synapse Project

üì± Generating session for: +972507102492
üîë API ID: 28000602

üì≤ Enter the Telegram verification code: 12345
üîê Enter your 2FA password (leave empty if none):

‚úÖ Successfully authenticated with Telegram!

üìã Copy this TELEGRAM_USER_SESSION value to your environment variables:
================================================================================
1BVtsOHwABpyi8g8Q2H0CgAAAAAAAAAA...very_long_string...AAAAAAAAAAA=
================================================================================

üí° Add this to your Render environment variables or .env file:
TELEGRAM_USER_SESSION=1BVtsOHwABpyi8g8Q2H0CgAAAAAAAAAA...very_long_string...AAAAAAAAAAA=

üîí Session saved and client disconnected successfully!
```

## Troubleshooting

### Common Issues:

1. **"Invalid phone number"**: Make sure your phone number includes the country code (e.g., +972507102492)

2. **"API ID/Hash invalid"**: Double-check your credentials from my.telegram.org

3. **"Phone code expired"**: Telegram codes expire quickly. Request a new code and try again

4. **"Too many attempts"**: Wait a few minutes before trying again

5. **"Session already exists"**: This is normal if you've run the script before. The new session will replace the old one.

### Need Help?

- Check that all environment variables are set correctly
- Ensure your phone can receive Telegram messages
- Verify your API credentials at [my.telegram.org](https://my.telegram.org)
- Make sure you're using the correct phone number format with country code

## Security Notes

- **Keep your session string secure**: It provides access to your Telegram account
- **Don't share session strings**: Each user needs their own session
- **Regenerate if compromised**: If you suspect your session is compromised, generate a new one
- **Environment variables only**: Never commit session strings to your code repository

## What This Session Enables

Once configured, your Synapse project will be able to:
- Monitor Telegram channels for messages
- Capture and analyze Telegram content
- Integrate Telegram data with your other social media monitoring features

The session authenticates your application to act on behalf of your Telegram account for the monitoring features built into Synapse.